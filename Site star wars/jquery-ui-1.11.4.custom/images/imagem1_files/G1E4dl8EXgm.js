/*!CK:2590623840!*//*1440442484,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["CnQ7+"]); }

__d('CollectionsRecommendationViewportTracking',['DOM','ViewportTracking','csx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l,m=55,n=200;k=babelHelpers.inherits(o,i);l=k&&k.prototype;o.prototype.getDataFromConfig=function(p){'use strict';this.control=p.control;this.useBanzai=false;};o.prototype.getTimeout=function(){'use strict';return n;};o.prototype.getAllStories=function(){'use strict';var p=[].concat(h.scry(this.control,"._3owb")).concat(h.scry(this.control,"._5jvf")).concat(h.scry(this.control,"._3cxw"));return p;};o.prototype.getStoryID=function(p){'use strict';var q=JSON.parse(p.getAttribute('data-gt'));return q&&q.token;};o.prototype.getDataToLog=function(p){'use strict';var q=Object.assign(JSON.parse(p.getAttribute('data-gt'))||{},{evt:m});return {gt:q};};o.init=function(p){'use strict';var q=new o();q.init(p);return q;};function o(){'use strict';k.apply(this,arguments);}f.exports=o;},null);
__d('TimelineCollectionAddRecommendation',['Event','AppSectionCurationState','AsyncRequest','CollectionsRecommendationViewportTracking','CSS','DOM','OGCollectionAddObject','OnVisible','Parent','TimelineAppCollection','TimelineAppSection','TimelineAppSectionCuration','ProfileOverviewSection','TriggerablePageletLoader','$','csx','cx','tidyEvent','DataStore'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){if(c.__markCompiled)c.__markCompiled();var aa={},ba="_5737",ca=250;n.subscribe(n.ADD_PLACEHOLDER,function(la,ma){q.incrementCount(ma);});n.subscribe(n.REMOVE_PLACEHOLDER,function(la,ma){q.decrementCount(ma);});function da(la){var ma=m.scry(la,"._3owb")[0];if(ma)return ma.getAttribute('data-obj');}function ea(la,ma){if(ma){var na=ma.nextSibling;na&&ia(na);aa[la].carousel.removeItem(ma);}aa[la].carousel.refresh();}function fa(la,ma){var na=[],oa=aa[la].carousel.getVisibleNodes(),pa=da(ma);for(var qa=0;qa<oa.length;++qa){var ra=da(oa[qa]);if(pa===ra)break;if(ra)na.push(ra);}return na;}function ga(la){var ma=[],na=aa[la].carousel.getVisibleNodes(),oa=aa[la].carousel.getVisibleNodesMax();for(var pa=1;pa<oa-1;pa++){if(pa===na.lentgh)break;var qa=da(na[pa]);if(qa)ma.push(qa);}return ma;}function ha(la,ma){var na=fa(la,ma);ea(la,ma);return na;}function ia(la){l.addClass(la,"_42fn");var ma=h.listen(la,'mouseover',function(){l.removeClass(la,"_42fn");ma.remove();});}function ja(la){var ma=aa[la];if(ma.filled)return;var na=r.getIDBySK(ma.data.sk);t.callWithSection(na,function(oa){var pa=oa.getActiveCollection().getToken(),qa=s.getSectionState(na);if(pa==ma.collectionToken&&qa===i.showItems&&ma.items.length>0){ma.filled=true;ma.carousel.addItems(ma.items);}});}var ka={addTriggerLoader:function(la,ma,na){new u({controller:'TimelineAppCollectionRecommendationPagelet',data:na,node:la,options:{crossPage:1,jsNonblock:1}},[{node:ma,type:u.TRIGGER_ONVISIBLE}]);},removeItemsByObjectIDs:function(la,ma){var na=aa[ma];if(!na)return;var oa=aa[ma].carousel.getNode();la.forEach(function(pa){var qa=m.scry(oa,'[data-obj="'+pa+'"]')[0];if(qa){var ra=p.byClass(qa,"_58rc");ha(ma,ra);}});},getPreviousItemIDs:function(la,ma){return fa(la,ma);},getPageletID:function(la){return 'pagelet_recommendation_'+la.split(':')[2];},init:function(la,ma,na,oa){var pa=aa[la]={carousel:ma,collectionToken:na.collection_token,data:na,isFirst:true,showPlusButtonItem:oa.items[0],items:oa.items,postUri:oa.post_uri,removeUri:oa.remove_uri,nextLinkData:oa.next_link_data,filled:oa.filled,headerPageletID:oa.header_pagelet_id,viewportTracking:k.init({control:ma.getNode()})};new o(pa.carousel.getNode(),function(){var ra=function(){ja(la);};r.subscribe('changeCollection',ra);s.register(r.getIDBySK(na.sk),ra);ra();},true,0);var qa=h.listen(pa.carousel.getNode(),'mouseenter',function(ra){qa.remove();if(pa.showPlusButtonItem)l.removeClass(pa.showPlusButtonItem,ba);});y([pa.carousel.subscribe('needsitems',ka.reloadRecommendation.bind(null,pa)),pa.carousel.subscribe('refreshed',pa.viewportTracking.fireTimer.bind(pa.viewportTracking)),pa.carousel.subscribe('lastelementremoved',function(ra){s.informState(i.hide,na.header_pagelet_id);setTimeout(function(){q.switchToNullStateCurationContent(na.collection_token);},ca);})]);y(h.listen(pa.carousel.getNextLink(),'mousedown',function(ra){pa.nextLinkData.rec_list_items=ga(la);pa.carousel.getNextLink().setAttribute('data-gt',JSON.stringify(pa.nextLinkData));}));y(h.listen(pa.carousel.getNode(),'click',function(ra){var sa=p.byTag(ra.getTarget(),'a');if(!sa)return;var ta="_gx8",ua="_vfm",va="_4-k4",wa=l.hasClass(sa,ta)||l.hasClass(sa,ua),xa=!wa&&l.hasClass(sa,va);if(wa||xa){var ya=p.byClass(sa,"_58rc"),za=m.find(ya,"._3owb"),ab=za.getAttribute('data-obj'),bb=JSON.parse(z.get(za,'post',null)),cb=ha(la,ya);if(wa){q.addGenericPlaceholderToCollection(pa.collectionToken,{entityID:ab});var db=pa.isFirst||0;delete pa.isFirst;new j(pa.postUri).setData(babelHelpers._extends({action:'add',item_id:ab,ignored_item_ids:cb,is_first:db,underlying_entity_id:ab,log_feedback:Number(na.taste_items_ids.hasOwnProperty(ab))},bb)).send();ra.prevent();}else new j(pa.removeUri).setData(babelHelpers._extends({objectid:ab,ignored_item_ids:cb},bb)).send();}}));},reloadRecommendation:function(la){if(!la.asyncing&&la.filled)la.asyncing=new j('/ajax/open_graph/recommendation_reload/').setData(la.data).send();},requestSuggestions:function(la,ma){if(!(la in aa))return;var na=aa[la].data;new j('/ajax/open_graph/similar_suggestions/').setData({pagelet_id:la,ogobjectid:ma,session_id:na.session_id,collection_token:na.collection_token}).setRelativeTo(v(r.getIDBySK(na.sk))).setHandler(this.onRequestSuggestionsComplete.bind(this,la)).send();},onRequestSuggestionsComplete:function(la){s.refreshState(i.showItems,r.getIDBySK(aa[la].data.sk));},removeItemFromRecommendations:function(la,ma){return ha(la,ma);},plusRecommendation:function(la,ma,na,oa,pa,qa){var ra=aa[la];q.addPlaceholderToCollection(pa,na);var sa=aa[ma];if(la!=ma&&sa){var ta=m.scry(sa.carousel.getNode(),'[data-obj="'+oa+'"]');if(ta&&ta.length>0){var ua=p.byClass(ta[0],"_58rc");ea(ma,ua);}}var va=null;if(qa){va=ha(la,na);}else va=fa(la,na);var wa=ra.isFirst||0;delete ra.isFirst;return {ignored_item_ids:va,is_first:wa,session_id:ra.sessionID};},populateSuggestionsList:function(la,ma,na,oa,pa){var qa=aa[la];qa.asyncing=false;if(ma.length===0){qa.carousel.endCarousel();}else{qa.data.exclude_ids=na;Object.assign(qa.data.taste_items_ids||{},oa);qa.carousel.addItems(ma);qa.data.cursor=pa;}}};f.exports=ka;},null);
__d('TimelineCollectionAddTagSuggestItem',['Arbiter','Ease','cx','csx','Parent','DOM','CSS','Animation','TimelineCollectionAddRecommendation'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();function q(r,s,t,u,v){'use strict';this.$TimelineCollectionAddTagSuggestItem1=s;this.$TimelineCollectionAddTagSuggestItem2=t;this.$TimelineCollectionAddTagSuggestItem3=v;this.$TimelineCollectionAddTagSuggestItem4=l.byAttribute(s,r);this.$TimelineCollectionAddTagSuggestItem5=m.scry(s,"._2ca6")[0];this.$TimelineCollectionAddTagSuggestItem6=m.find(s,"._5epd");this.$TimelineCollectionAddTagSuggestItem7=m.find(s,"._2ca7");this.$TimelineCollectionAddTagSuggestItem8=m.find(s,"._2ca8");this.$TimelineCollectionAddTagSuggestItem9=m.find(s,"._5ep9");u.subscribe('confirm',this.$TimelineCollectionAddTagSuggestItem10.bind(this));u.subscribe('reject',this.$TimelineCollectionAddTagSuggestItem11.bind(this));h.subscribe('PhotoTagger.TAG_SUGGESTION_CONFIRMED/'+this.$TimelineCollectionAddTagSuggestItem3,this.$TimelineCollectionAddTagSuggestItem10.bind(this));h.subscribe('PhotoTagger.TAG_SUGGESTION_REJECTED/'+this.$TimelineCollectionAddTagSuggestItem3,this.$TimelineCollectionAddTagSuggestItem11.bind(this));}q.prototype.$TimelineCollectionAddTagSuggestItem10=function(){'use strict';this.$TimelineCollectionAddTagSuggestItem12();this.$TimelineCollectionAddTagSuggestItem13(this.$TimelineCollectionAddTagSuggestItem6,1,.4,400).go();this.$TimelineCollectionAddTagSuggestItem13(this.$TimelineCollectionAddTagSuggestItem7,0,1,400).go();setTimeout((function(){this.$TimelineCollectionAddTagSuggestItem13(this.$TimelineCollectionAddTagSuggestItem1,1,0,400).checkpoint(1,this.$TimelineCollectionAddTagSuggestItem14.bind(this)).go();}).bind(this),750);};q.prototype.$TimelineCollectionAddTagSuggestItem11=function(){'use strict';this.$TimelineCollectionAddTagSuggestItem12();this.$TimelineCollectionAddTagSuggestItem13(this.$TimelineCollectionAddTagSuggestItem6,1,.4,600).go();this.$TimelineCollectionAddTagSuggestItem13(this.$TimelineCollectionAddTagSuggestItem1,1,0,600).checkpoint(1,this.$TimelineCollectionAddTagSuggestItem14.bind(this)).go();};q.prototype.$TimelineCollectionAddTagSuggestItem12=function(){'use strict';n.hide(this.$TimelineCollectionAddTagSuggestItem5);n.hide(this.$TimelineCollectionAddTagSuggestItem8);n.hide(this.$TimelineCollectionAddTagSuggestItem9);n.addClass(this.$TimelineCollectionAddTagSuggestItem1,"_2ca5");};q.prototype.$TimelineCollectionAddTagSuggestItem13=function(r,s,t,u){'use strict';return new o(r).from('opacity',s).to('opacity',t).ease(i.makePowerInOut(2)).duration(u);};q.prototype.$TimelineCollectionAddTagSuggestItem14=function(){'use strict';p.removeItemFromRecommendations(this.$TimelineCollectionAddTagSuggestItem2,this.$TimelineCollectionAddTagSuggestItem4);};f.exports=q;},null);
__d('TimelineCollectionAddTagSuggestSelector',['AsyncRequest','ArbiterMixin','tidyEvent','mixin','Event'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;m=babelHelpers.inherits(o,k(i));n=m&&m.prototype;function o(p,q,r,s,t,u){'use strict';n.constructor.call(this);this.$TimelineCollectionAddTagSuggestSelector1=p;this.$TimelineCollectionAddTagSuggestSelector2=t;this.$TimelineCollectionAddTagSuggestSelector3=u;j(l.listen(p,'click',this.$TimelineCollectionAddTagSuggestSelector4.bind(this,r,'confirm')),l.listen(q,'click',this.$TimelineCollectionAddTagSuggestSelector4.bind(this,s,'reject')));}o.prototype.$TimelineCollectionAddTagSuggestSelector4=function(p,event){'use strict';this.inform(event);new h(p).setData(this.$TimelineCollectionAddTagSuggestSelector5(event)).send();};o.prototype.$TimelineCollectionAddTagSuggestSelector5=function(event){'use strict';return event=='confirm'?this.$TimelineCollectionAddTagSuggestSelector2:this.$TimelineCollectionAddTagSuggestSelector3;};f.exports=o;},null);
__d('TimelineCollectionUnlikeHandler',['Arbiter','AsyncRequest','CSS','PageLikeConstants','TimelineAppCollection'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={},n={init:function(o,p,q){m[o]={buttons:q,collectionToken:p};h.subscribe(k.UNLIKED,this._showUndo);h.subscribe('Collection/removeProfileConnection',this._showUndo);},_showUndo:function(o,p){var q=m[p.profile_id];if(q){j.hide(q.buttons);l.decrementCount(l.getIDByToken(q.collectionToken));new i('/ajax/timeline/app_collection_item/unlike/fbpage/').setData({collection_token:q.collectionToken,profile_id:p.profile_id}).send();m[p.profile_id]=null;}}};f.exports=n;},null);