/*!CK:2505318414!*//*1448399141,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["5co94"]); }

__d("Shaka",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};(function(i){var j,k=this;function l(ak,bk){var ck=ak.split("."),dk=k;ck[0] in dk||!dk.execScript||dk.execScript("var "+ck[0]);for(var ek;ck.length&&(ek=ck.shift());)ck.length||void 0===bk?dk[ek]?dk=dk[ek]:dk=dk[ek]={}:dk[ek]=bk;}function m(ak,bk){function ck(){}ck.prototype=bk.prototype;ak.mb=bk.prototype;ak.prototype=new ck();ak.prototype.constructor=ak;ak.ib=function(dk,ek,fk){return bk.prototype[ek].apply(dk,Array.prototype.slice.call(arguments,2));};}function n(ak,bk,ck){this.id=ak;this.bandwidth=bk||0;this.lang=ck||"unknown";this.active=false;}l("shaka.player.AudioTrack.compare",function(ak,bk){return ak.lang<bk.lang?-1:ak.lang>bk.lang?1:ak.bandwidth<bk.bandwidth?-1:ak.bandwidth>bk.bandwidth?1:0;});function o(ak,bk){this.id=ak;this.lang=bk||"unknown";this.enabled=this.active=false;}l("shaka.player.TextTrack.compare",function(ak,bk){return ak.lang<bk.lang?-1:ak.lang>bk.lang?1:0;});function p(ak,bk,ck,dk){this.id=ak;this.bandwidth=bk||0;this.width=ck||0;this.height=dk||0;this.active=false;}function q(ak,bk){var ck=ak.width*ak.height,dk=bk.width*bk.height;return ck<dk?-1:ck>dk?1:ak.bandwidth<bk.bandwidth?-1:ak.bandwidth>bk.bandwidth?1:0;}l("shaka.player.VideoTrack.compare",q);function r(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.maxHeight=null;}r.prototype.clone=function(){var ak=new r();ak.maxHeight=this.maxHeight;ak.maxWidth=this.maxWidth;ak.maxBandwidth=this.maxBandwidth;ak.minBandwidth=this.minBandwidth;return ak;};function s(){var ak=Element.prototype;ak.requestFullscreen=ak.requestFullscreen||ak.mozRequestFullScreen||ak.msRequestFullscreen||ak.webkitRequestFullscreen;ak=Document.prototype;ak.exitFullscreen=ak.exitFullscreen||ak.mozCancelFullScreen||ak.msExitFullscreen||ak.webkitExitFullscreen;"fullscreenElement" in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement;}});document.addEventListener("webkitfullscreenchange",t);document.addEventListener("webkitfullscreenerror",t);document.addEventListener("mozfullscreenchange",t);document.addEventListener("mozfullscreenerror",t);document.addEventListener("MSFullscreenChange",t);document.addEventListener("MSFullscreenError",t);}l("shaka.polyfill.Fullscreen.install",s);function t(ak){var bk=ak.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),bk=new Event(bk,ak);ak.target.dispatchEvent(bk);}function u(){var ak=HTMLVideoElement.prototype;!ak.getVideoPlaybackQuality&&"webkitDroppedFrameCount" in ak&&(ak.getVideoPlaybackQuality=v);}l("shaka.polyfill.VideoPlaybackQuality.install",u);function v(){return {droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0};}function w(){var ak="CustomEvent" in i;if(ak)try{new CustomEvent("");}catch(bk){ak=false;}ak||(i.CustomEvent=x);}l("shaka.polyfill.CustomEvent.install",w);function x(ak,bk){var ck=document.createEvent("CustomEvent"),dk=bk||{bubbles:false,cancelable:false,detail:null};ck.initCustomEvent(ak,!!dk.bubbles,!!dk.cancelable,dk.detail);return ck;}function y(ak){var bk=console[ak];bk?bk.bind||(console[ak]=function(){bk.apply(console,arguments);}):console[ak]=function(){};}y("error");y("warn");y("info");y("log");y("debug");function z(){}function aa(){this.fontSize="100%";this.fontColor=da;this.fontOpacity=fa;this.backgroundColor=ea;this.backgroundOpacity=fa;this.fontEdge=ga;}l("shaka.player.TextStyle",aa);aa.prototype.a=function(){var ak=i.localStorage.getItem("ShakaPlayerTextStyle");if(ak){var bk;try{bk=JSON.parse(ak);}catch(ck){return;}if(bk&&"object"==typeof bk){var ak=bk,dk;for(dk in ak)dk in this&&(this[dk]=ak[dk]);}}};aa.prototype.load=aa.prototype.a;aa.prototype.b=function(){i.localStorage.setItem("ShakaPlayerTextStyle",JSON.stringify(this));};aa.prototype.store=aa.prototype.b;function ba(ak){var bk=[];bk.push("font-size: "+ak.fontSize);bk.push("color: "+ca(ak.fontColor,ak.fontOpacity));bk.push("background-color: "+ca(ak.backgroundColor,ak.backgroundOpacity));for(var ck=[],dk=0;dk<ak.fontEdge.length;++dk){var ek=ak.fontEdge[dk].slice(3,6);ck.push(ca(ak.fontEdge[dk].slice(0,3),ak.fontOpacity)+" "+ek.join("px ")+"px");}bk.push("text-shadow: "+ck.join(","));return bk.join("; ");}function ca(ak,bk){return "rgba("+ak.concat(bk).join(",")+")";}var da=[255,255,255],ea=[0,0,0];aa.StandardColors={WHITE:da,BLACK:ea,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var fa=1;aa.StandardOpacities={OPAQUE:fa,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var ga=[];aa.EdgeStyles={NONE:ga,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function ha(){return Promise.reject(Error("The key system specified is not supported."));}function ia(ak){return null==ak?Promise.resolve():Promise.reject(Error("MediaKeys not supported."));}function ja(){throw new TypeError("Illegal constructor.");}ja.prototype.createSession=function(){};ja.prototype.setServerCertificate=function(){};function ka(){throw new TypeError("Illegal constructor.");}ka.prototype.getConfiguration=function(){};ka.prototype.createMediaKeys=function(){};function la(ak){pa[ak]={Z:oa(),end:NaN};}function ma(ak){if(ak=pa[ak])ak.end=oa();}function na(ak){return (ak=pa[ak])&&ak.end?ak.end-ak.Z:NaN;}var oa=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now,pa={};function qa(ak){var bk=new CustomEvent(ak.type,{detail:ak.detail,bubbles:!!ak.bubbles}),ck;for(ck in ak)ck in bk||(bk[ck]=ak[ck]);return bk;}function ra(ak){return new CustomEvent("error",{detail:ak,bubbles:true});}function sa(ak){this.c=Math.exp(Math.log(.5)/ak);this.a=this.b=0;}sa.prototype.sample=function(ak,bk){var ck=Math.pow(this.c,ak);this.b=bk*(1-ck)+ck*this.b;this.a+=ak;};function ta(ak){return ak.b/(1-Math.pow(ak.c,ak.a));}function ua(ak){this.b=ak;this.a=new tb(ak);va||(va=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]);}var va;function wa(ak){var bk;bk=xa(ak);if(7<bk.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var ck=0,dk=0;dk<bk.length;dk++)ck=256*ck+bk[dk];bk=ck;ck=xa(ak);ak:{for(dk=0;dk<va.length;dk++)if(nb(ck,va[dk])){dk=true;break ak;}dk=false;};if(dk)throw new RangeError("EbmlParser: Element cannot contain dynamically sized data.");if(8==ck.length&&ck[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var dk=ck[0]&(1<<8-ck.length)-1,ek=1;ek<ck.length;ek++)dk=256*dk+ck[ek];ck=dk;ck=ak.a.a+ck<=ak.b.byteLength?ck:ak.b.byteLength-ak.a.a;dk=new DataView(ak.b.buffer,ak.b.byteOffset+ak.a.a,ck);bc(ak.a,ck);return new ya(bk,dk);}function xa(ak){var bk=xb(ak.a),ck;for(ck=1;8>=ck&&!(bk&1<<8-ck);ck++);if(8<ck)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var dk=new Uint8Array(ck);dk[0]=bk;for(bk=1;bk<ck;bk++)dk[bk]=xb(ak.a);return dk;}function ya(ak,bk){this.id=ak;this.a=bk;}function za(ak){if(8<ak.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==ak.a.byteLength&&ak.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var bk=0,ck=0;ck<ak.a.byteLength;ck++)var dk=ak.a.getUint8(ck),bk=256*bk+dk;return bk;}function ab(ak,bk){return bk.bind(ak);}function bb(ak,bk){for(var ck={},dk=0;dk<ak.length;++dk){var ek=bk?bk(ak[dk]):ak[dk].toString();ck[ek]=ak[dk];}var dk=[],fk;for(fk in ck)dk.push(ck[fk]);return dk;}function cb(ak,bk,ck){fb(bk);fb(ck);return ck==bk||ak>=db&&ck==bk.split("-")[0]||ak>=eb&&ck.split("-")[0]==bk.split("-")[0]?true:false;}var db=1,eb=2;function fb(ak){ak=ak.toLowerCase().split("-");var bk=gb[ak[0]];bk&&(ak[0]=bk);return ak.join("-");}var gb={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"},hb=0;function ib(ak){ak.split("").reduce(function(bk,ck,dk){return bk+(dk&&0==dk%4?" "+ck:ck);});}function jb(ak){return String.fromCharCode.apply(null,ak);}l("shaka.util.Uint8ArrayUtils.toString",jb);function kb(ak){for(var bk=new Uint8Array(ak.length),ck=0;ck<ak.length;++ck)bk[ck]=ak.charCodeAt(ck);return bk;}l("shaka.util.Uint8ArrayUtils.fromString",kb);l("shaka.util.Uint8ArrayUtils.toBase64",function(ak,bk){var ck=void 0==bk?true:bk,dk=i.btoa(jb(ak)).replace(/\+/g,"-").replace(/\//g,"_");return ck?dk:dk.replace(/=*$/,"");});function lb(ak){return kb(i.atob(ak.replace(/-/g,"+").replace(/_/g,"/")));}l("shaka.util.Uint8ArrayUtils.fromBase64",lb);l("shaka.util.Uint8ArrayUtils.fromHex",function(ak){for(var bk=new Uint8Array(ak.length/2),ck=0;ck<ak.length;ck+=2)bk[ck/2]=i.parseInt(ak.substr(ck,2),16);return bk;});function mb(ak){for(var bk="",ck=0;ck<ak.length;++ck){var dk=ak[ck].toString(16);1==dk.length&&(dk="0"+dk);bk+=dk;}return bk;}l("shaka.util.Uint8ArrayUtils.toHex",mb);function nb(ak,bk){if(!ak&&!bk)return true;if(!ak||!bk||ak.length!=bk.length)return false;for(var ck=0;ck<ak.length;++ck)if(ak[ck]!=bk[ck])return false;return true;}function ob(){this.j=this.a="";this.o=false;this.g=this.f=null;this.l=this.i=false;this.s=this.h="";this.c=null;this.b=[];}function pb(ak,bk){var ck=ak.b.concat(bk.map(function(dk){return {initData:new Uint8Array(dk.initData.buffer),initDataType:dk.initDataType};}));ak.b=bb(ck,function(dk){return Array.prototype.join.apply(dk.initData)+","+dk.initDataType;});}function qb(ak,bk,ck,dk,ek,fk,gk,hk,ik,jk,kk){this.g=ak;this.j=bk;this.o=ck;this.a=[];this.h=ek||null;this.i=fk||null;this.f=gk==rb;this.l=hk==sb;this.c=ik||"";this.s=jk||"";this.b=kk||null;dk&&this.a.push(dk);}l("shaka.player.DrmSchemeInfo",qb);var rb=1;qb.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:rb};var sb=1;qb.PersistentState={OPTIONAL:0,REQUIRED:sb};qb.createUnencrypted=function(){return new qb("","",false,null);};function tb(ak){var bk=ub;this.b=ak;this.c=bk==vb;this.a=0;}var ub=0,vb=1;function wb(ak){return ak.a<ak.b.byteLength;}function xb(ak){var bk=ak.b.getUint8(ak.a);ak.a+=1;return bk;}function yb(ak){var bk=ak.b.getUint32(ak.a,ak.c);ak.a+=4;return bk;}function zb(ak){var bk,ck;ak.c?(bk=ak.b.getUint32(ak.a,true),ck=ak.b.getUint32(ak.a+4,true)):(ck=ak.b.getUint32(ak.a,false),bk=ak.b.getUint32(ak.a+4,false));if(2097151<ck)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");ak.a+=8;return ck*Math.pow(2,32)+bk;}function ac(ak){if(ak.a+16>ak.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var bk=new Uint8Array(ak.b.buffer,ak.a,16);ak.a+=16;return bk;}function bc(ak,bk){if(ak.a+bk>ak.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");ak.a+=bk;}function cc(ak){this.systemIds=[];this.cencKeyIds=[];ak=new tb(new DataView(ak.buffer));try{for(;wb(ak);){var ck=ak.a,dk=yb(ak),ek=yb(ak);1==dk?dk=zb(ak):0==dk&&(dk=ak.b.byteLength-ck);if(1886614376!=ek){bc(ak,dk-(ak.a-ck));}else{var fk=xb(ak);if(1<fk){bc(ak,dk-(ak.a-ck));}else{bc(ak,3);var gk=mb(ac(ak)),hk=[];if(0<fk)for(var ik=yb(ak),jk=0;jk<ik;++jk){var kk=mb(ac(ak));hk.push(kk);}var lk=yb(ak);bc(ak,lk);this.cencKeyIds.push.apply(this.cencKeyIds,hk);this.systemIds.push(gk);ak.a!=ck+dk&&bc(ak,dk-(ak.a-ck));}}}}catch(bk){}}var dc={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."};function ec(){var ak,bk,ck=new Promise(function(dk,ek){ak=dk;bk=ek;});ck.resolve=ak;ck.reject=bk;ck.destroy=ec.prototype.destroy;return ck;}ec.prototype.destroy=function(){this.catch(function(){});var ak=Error("Destroyed!");ak.type="destroy";this.reject(ak);};function fc(){this.g=new ec();this.f=false;this.a=null;this.b=[];this.c=null;}function gc(ak,bk){if(ak.f)throw Error("Cannot append to a running task!");ak.b.push(bk);}fc.prototype.start=function(){if(this.f)throw Error("Task already started!");this.f=true;this.b.unshift(function(){});hc(this,void 0);};fc.prototype.end=function(){this.b.splice(1);};function hc(ak,bk){var ck=ak.b[0](bk),dk;ck?(dk=ck[0],ak.c=ck[1]):(dk=Promise.resolve(),ak.c=null);dk.then(ab(ak,function(ek){this.a?(this.b=[],this.c=null,ic(this)):(this.b.shift(),this.b.length?hc(this,ek):(this.g.resolve(ek),this.c=null));})).catch(ab(ak,function(ek){this.b=[];this.c=null;this.a?ic(this):this.g.reject(ek);}));}function ic(ak){var bk=Error("Task aborted.");bk.type="aborted";ak.g.reject(bk);i.setTimeout(function(){this.a.resolve();this.a=null;}.bind(ak),5);}function jc(){this.a={};}jc.prototype.push=function(ak,bk){this.a.hasOwnProperty(ak)?this.a[ak].push(bk):this.a[ak]=[bk];};jc.prototype.get=function(ak){return (ak=this.a[ak])?ak.slice():null;};function kc(ak){var bk=[],ck;for(ck in ak.a)bk.push.apply(bk,ak.a[ck]);return bk;}function lc(ak,bk,ck){if(ak=ak.a[bk])for(bk=0;bk<ak.length;++bk)ak[bk]==ck&&(ak.splice(bk,1),--bk);}function mc(ak){var bk=[],ck;for(ck in ak.a)bk.push(ck);return bk;}function nc(){this.a=new jc();}nc.prototype.destroy=function(){pc(this);this.a=null;};function oc(ak,bk,ck,dk){bk=new qc(bk,ck,dk);ak.a.push(ck,bk);}nc.prototype.$=function(ak,bk){for(var ck=this.a.get(bk)||[],dk=0;dk<ck.length;++dk){var ek=ck[dk];ek.target==ak&&(ek.$(),lc(this.a,bk,ek));}};function pc(ak){for(var bk=kc(ak.a),ck=0;ck<bk.length;++ck)bk[ck].$();ak.a.a={};}function qc(ak,bk,ck){this.target=ak;this.type=bk;this.a=ck;this.target.addEventListener(bk,ck,false);}qc.prototype.$=function(){this.target&&(this.target.removeEventListener(this.type,this.a,false),this.a=this.target=null);};function rc(ak,bk,ck){MediaSource.isTypeSupported(bk);bk=ak.addSourceBuffer(bk);this.j=ak;this.c=bk;this.l=ck;this.h=new nc();this.b=[];this.o=0;this.f=this.a=null;this.s=0;oc(this.h,this.c,"updateend",this.u.bind(this));}var sc=1/60;rc.prototype.destroy=function(){xc(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.h.destroy();this.j=this.c=this.h=null;};function tc(ak,bk){for(var ck=ak.c.buffered,dk=0;dk<ck.length;++dk){var ek=ck.start(dk)-sc,fk=ck.end(dk)+sc;if(bk>=ek&&bk<=fk)return ck.end(dk)-bk;}return 0;}function uc(ak,bk,ck,dk){if(ak.a)return ak=Error("Cannot fetch ("+ak.i+"): previous operation not complete."),ak.type="stream",Promise.reject(ak);ak.a=new fc();ck!=ak.c.timestampOffset&&(ak.c.timestampOffset=ck);ck=bk.a?bk.a-bk.b:1;var ek=new yf();ek.a=3;ek.g=1000*ck;ek.c=1000*ak.s;var fk=fg(bk.url,ek,ak.l),gk=dg.prototype.f.bind(bk.url);dk&&gc(ak.a,function(){return [dk.then(function(jk){return zc(this,jk);}.bind(this)),this.g.bind(this)];}.bind(ak));gc(ak.a,ab(ak,function(){return [fk.then(function(jk){this.l.getBandwidth();return zc(this,jk);}.bind(this)),function(){gk();this.g();}.bind(this)];}));var hk=0==ak.c.buffered.length&&0==ak.b.length,ik=null;gc(ak.a,function(){if(0==this.c.buffered.length){var jk=Error("Failed to buffer segment ("+this.i+").");jk.type="stream";return [Promise.reject(jk)];}hk&&(jk=bk.b,ik=this.c.buffered.start(0)-jk);jk=ng(this.b,bk.b);0<=jk?this.b.splice(jk+1,0,bk):this.b.push(bk);}.bind(ak));return yc(ak).then(function(){return Promise.resolve(ik);}.bind(ak));}function vc(ak){if(ak.a)return ak=Error("Cannot clear ("+ak.i+"): previous operation not complete."),ak.type="stream",Promise.reject(ak);ak.a=new fc();gc(ak.a,function(){var bk;bk:if(0==this.c.buffered.length){bk=Promise.resolve();}else{try{this.c.remove(0,Number.POSITIVE_INFINITY);}catch(ck){bk=Promise.reject(ck);break bk;}this.b=[];bk=this.f=new ec();};return [bk,this.g.bind(this)];}.bind(ak));return yc(ak);}function wc(ak,bk){if(ak.a){var ck=Error("Cannot clearAfter ("+ak.i+"): previous operation not complete.");ck.type="stream";return Promise.reject(ck);}ak.a=new fc();gc(ak.a,function(){return [ad(this,bk),this.g.bind(this)];}.bind(ak));return yc(ak);}function xc(ak){ak.a?(ak=ak.a,ak.a?ak=ak.a:ak.f?(ak.c&&ak.c(),ak.a=new ec(),ak=ak.a):(ak.f=true,ak=Promise.resolve())):ak=Promise.resolve();return ak;}function yc(ak){ak.a.start();return ak.a.g.then(ab(ak,function(){this.a=null;})).catch(ab(ak,function(bk){this.a=null;return Promise.reject(bk);}));}function zc(ak,bk){try{ak.c.appendBuffer(bk);}catch(ck){return Promise.reject(ck);}ak.f=new ec();return ak.f;}function ad(ak,bk){if(0==ak.c.buffered.length)return Promise.resolve();var ck=ng(ak.b,bk);if(-1==ck||ck==ak.b.length-1)return Promise.resolve();try{ak.c.remove(ak.b[ck+1].b,Number.POSITIVE_INFINITY);}catch(dk){return Promise.reject(dk);}ak.b=ak.b.slice(0,ck+1);ak.f=new ec();return ak.f;}rc.prototype.g=function(){"open"==this.j.readyState&&this.c.abort();};rc.prototype.u=function(){this.f.resolve();this.f=null;};function bd(ak){this.oa=new jc();this.s=ak;}l("shaka.util.FakeEventTarget",bd);bd.prototype.addEventListener=function(ak,bk,ck){ck||this.oa.push(ak,bk);};bd.prototype.removeEventListener=function(ak,bk,ck){ck||lc(this.oa,ak,bk);};bd.prototype.dispatchEvent=function(ak){delete ak.srcElement;delete ak.target;delete ak.currentTarget;Object.defineProperties(ak,{srcElement:{value:null,writable:true},target:{value:this,writable:true},currentTarget:{value:null,writable:true}});return cd(this,ak);};function cd(ak,bk){bk.currentTarget=ak;for(var ck=ak.oa.get(bk.type)||[],dk=0;dk<ck.length;++dk){var ek=ck[dk];try{ek.handleEvent?ek.handleEvent(bk):ek.call(ak,bk);}catch(fk){}}ak.s&&bk.bubbles&&cd(ak.s,bk);return bk.defaultPrevented;}function dd(ak,bk){try{var dk=new fd(ak,bk);return Promise.resolve(dk);}catch(ck){return Promise.reject(ck);}}function ed(ak){var bk=this.mediaKeys;bk&&bk!=ak&&hd(bk,null);delete this.mediaKeys;(this.mediaKeys=ak)&&hd(ak,this);return Promise.resolve();}function fd(ak,bk){this.a=this.keySystem=ak;var ck=true;"org.w3.clearkey"==ak&&(this.a="webkit-org.w3.clearkey",ck=false);var dk=false,ek;ek=document.getElementsByTagName("video");ek=ek.length?ek[0]:document.createElement("video");for(var fk=0;fk<bk.length;++fk){var gk=bk[fk],hk={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:gk.initDataTypes,sessionTypes:["temporary"]},ik=false;if(gk.audioCapabilities)for(var jk=0;jk<gk.audioCapabilities.length;++jk){var kk=gk.audioCapabilities[jk];kk.contentType&&(ik=true,ek.canPlayType(kk.contentType.split(";")[0],this.a)&&(hk.audioCapabilities.push(kk),dk=true));}if(gk.videoCapabilities)for(jk=0;jk<gk.videoCapabilities.length;++jk)kk=gk.videoCapabilities[jk],kk.contentType&&(ik=true,ek.canPlayType(kk.contentType,this.a)&&(hk.videoCapabilities.push(kk),dk=true));ik||(dk=ek.canPlayType("video/mp4",this.a)||ek.canPlayType("video/webm",this.a));"required"==gk.persistentState&&(ck?(hk.persistentState="required",hk.sessionTypes=["persistent-license"]):dk=false);if(dk){this.b=hk;return;}}throw Error("None of the requested configurations were supported.");}fd.prototype.createMediaKeys=function(){var ak=new gd(this.a);return Promise.resolve(ak);};fd.prototype.getConfiguration=function(){return this.b;};function gd(ak){this.g=ak;this.b=null;this.a=new nc();this.c=[];this.f={};}function hd(ak,bk){ak.b=bk;pc(ak.a);bk&&(oc(ak.a,bk,"webkitneedkey",ak.Ya.bind(ak)),oc(ak.a,bk,"webkitkeymessage",ak.Xa.bind(ak)),oc(ak.a,bk,"webkitkeyadded",ak.Va.bind(ak)),oc(ak.a,bk,"webkitkeyerror",ak.Wa.bind(ak)));}j=gd.prototype;j.createSession=function(ak){var bk=ak||"temporary";if("temporary"!=bk&&"persistent-license"!=bk)throw new TypeError("Session type "+ak+" is unsupported on this platform.");ak=this.b||document.createElement("video");ak.src||(ak.src="about:blank");bk=new jd(ak,this.g,bk);this.c.push(bk);return bk;};j.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};j.Ya=function(ak){ak=qa({type:"encrypted",initDataType:"webm",initData:ak.initData});this.b.dispatchEvent(ak);};j.Xa=function(ak){var bk=id(this,ak.sessionId);bk&&(ak=qa({type:"message",messageType:void 0==bk.keyStatuses.a?"licenserequest":"licenserenewal",message:ak.message}),bk.b&&(bk.b.resolve(),bk.b=null),bk.dispatchEvent(ak));};j.Va=function(ak){if(ak=id(this,ak.sessionId))ld(ak,"usable"),ak.a&&ak.a.resolve(),ak.a=null;};j.Wa=function(ak){var bk=id(this,ak.sessionId);if(bk){var ck=Error("EME v0.1b key error");ck.errorCode=ak.errorCode;ck.errorCode.systemCode=ak.systemCode;!ak.sessionId&&bk.b?(ck.method="generateRequest",45==ak.systemCode&&(ck.message="Unsupported session type."),bk.b.reject(ck),bk.b=null):ak.sessionId&&bk.a?(ck.method="update",bk.a.reject(ck),bk.a=null):(ck=ak.systemCode,ak.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?ld(bk,"output-restricted"):1==ck?ld(bk,"expired"):ld(bk,"internal-error"));}};function id(ak,bk){var ck=ak.f[bk];return ck?ck:(ck=ak.c.shift())?(ck.sessionId=bk,ak.f[bk]=ck):null;}function jd(ak,bk,ck){bd.call(this,null);this.f=ak;this.h=false;this.a=this.b=null;this.c=bk;this.g=ck;this.sessionId="";this.expiration=NaN;this.closed=new ec();this.keyStatuses=new nd();}m(jd,bd);function kd(ak,bk,ck){if(ak.h)return Promise.reject(Error("The session is already initialized."));ak.h=true;var dk;try{if("persistent-license"==ak.g){if(ck){dk=kb("LOAD_SESSION|"+ck);}else{var fk=new Uint8Array(bk);dk=kb("PERSISTENT|"+jb(fk));}}else dk=new Uint8Array(bk);}catch(ek){return Promise.reject(ek);}ak.b=new ec();try{ak.f.webkitGenerateKeyRequest(ak.c,dk);}catch(gk){if("InvalidStateError"!=gk.name)return ak.b=null,Promise.reject(gk);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,dk);}catch(hk){this.b.reject(hk),this.b=null;}}.bind(ak),10);}return ak.b;}j=jd.prototype;j.ta=function(ak,bk){if(this.a){this.a.then(this.ta.bind(this,ak,bk)).catch(this.ta.bind(this,ak,bk));}else{this.a=ak;var ck,dk;"webkit-org.w3.clearkey"==this.c?(ck=jb(new Uint8Array(bk)),dk=JSON.parse(ck),"oct"!=dk.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),ck=lb(dk.keys[0].k),dk=lb(dk.keys[0].kid)):(ck=new Uint8Array(bk),dk=null);try{this.f.webkitAddKey(this.c,ck,dk,this.sessionId);}catch(ek){this.a.reject(ek),this.a=null;}}};function ld(ak,bk){var ck=ak.keyStatuses;ck.size=void 0==bk?0:1;ck.a=bk;ck=qa({type:"keystatuseschange"});ak.dispatchEvent(ck);}j.generateRequest=function(ak,bk){return kd(this,bk,null);};j.load=function(ak){return "persistent-license"==this.g?kd(this,null,ak):Promise.reject(Error("Not a persistent session."));};j.update=function(ak){var bk=new ec();this.ta(bk,ak);return bk;};j.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId);}this.closed.resolve();return this.closed;};j.remove=function(){return "persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close();};function md(ak){this.b=ak;this.a=0;}md.prototype.next=function(){return this.a>=this.b.length?{value:void 0,done:true}:{value:this.b[this.a++],done:false};};function nd(){this.size=0;this.a=void 0;}var od;j=nd.prototype;j.entries=function(){var ak=od,bk=[];this.a&&bk.push([ak,this.a]);return new md(bk);};j.forEach=function(ak){this.a&&ak(this.a);};j.get=function(ak){if(this.has(ak))return this.a;};j.has=function(ak){var bk=od;return this.a&&nb(new Uint8Array(ak),bk)?true:false;};j.keys=function(){var ak=od,bk=[];this.a&&bk.push(ak);return new md(bk);};j.values=function(){var ak=[];this.a&&ak.push(this.a);return new md(ak);};function pd(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(od=new Uint8Array([0]),Navigator.prototype.requestMediaKeySystemAccess=dd,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ed,i.MediaKeys=gd,i.MediaKeySystemAccess=fd):(Navigator.prototype.requestMediaKeySystemAccess=ha,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ia,i.MediaKeys=ja,i.MediaKeySystemAccess=ka));}l("shaka.polyfill.MediaKeys.install",pd);l("shaka.polyfill.installAll",function(){w();s();pd();u();});function qd(){bd.call(this,null);this.a=new sa(3);this.c=new sa(10);this.b=0;}m(qd,bd);l("shaka.util.EWMABandwidthEstimator",qd);qd.prototype.sample=function(ak,bk){if(!(65536>bk)){ak=Math.max(ak,50);var ck=8000*bk/ak,dk=ak/1000;this.a.sample(dk,ck);this.c.sample(dk,ck);this.dispatchEvent(qa({type:"bandwidth"}));this.b=Date.now();}};qd.prototype.getBandwidth=function(){return .5>this.a.a?500000:Math.min(ta(this.a),ta(this.c));};qd.prototype.getDataAge=function(){return (Date.now()-this.b)/1000;};qd.prototype.supportsCaching=function(){return false;};function rd(ak){return Object.keys(ak).map(function(bk){return ak[bk];});}function sd(ak,bk){var ck=ud(ak,bk,"number");if(null==ck)return null;if(isNaN(ck)||ck==Number.NEGATIVE_INFINITY||ck==Number.POSITIVE_INFINITY)throw new RangeError("'"+bk+"' must be finite.");if(0>ck)throw new RangeError("'"+bk+"' must be >= 0");return ck;}function td(ak,bk){return ud(ak,bk,"string");}function ud(ak,bk,ck){ak=ak[bk];if(null==ak)return null;if(typeof ak!=ck)throw new TypeError("'"+bk+"' must be a "+ck+".");return ak;}function vd(ak,bk,ck){ak=ak[bk];if(null==ak)return null;if(!(ak instanceof ck))throw new TypeError("'"+bk+"' must be an instance of "+ck.name+".");return ak;}var wd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function xd(ak){var bk;ak instanceof xd?(yd(this,ak.J),this.O=ak.O,this.I=ak.I,zd(this,ak.V),this.G=ak.G,ae(this,ak.a.clone()),this.N=ak.N):ak&&(bk=String(ak).match(wd))?(yd(this,bk[1]||"",true),this.O=be(bk[2]||""),this.I=be(bk[3]||"",true),zd(this,bk[4]),this.G=be(bk[5]||"",true),ae(this,bk[6]||"",true),this.N=be(bk[7]||"")):this.a=new je(null);}j=xd.prototype;j.J="";j.O="";j.I="";j.V=null;j.G="";j.N="";j.toString=function(){var ak=[],bk=this.J;bk&&ak.push(ce(bk,ee,true),":");if(bk=this.I){ak.push("//");var ck=this.O;ck&&ak.push(ce(ck,ee,true),"@");ak.push(encodeURIComponent(bk).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));bk=this.V;null!=bk&&ak.push(":",String(bk));}if(bk=this.G)this.I&&"/"!=bk.charAt(0)&&ak.push("/"),ak.push(ce(bk,"/"==bk.charAt(0)?ge:fe,true));(bk=this.a.toString())&&ak.push("?",bk);(bk=this.N)&&ak.push("#",ce(bk,ie));return ak.join("");};j.resolve=function(ak){var bk=this.clone();"data"===bk.J&&(bk=new xd());var ck=!!ak.J;ck?yd(bk,ak.J):ck=!!ak.O;ck?bk.O=ak.O:ck=!!ak.I;ck?bk.I=ak.I:ck=null!=ak.V;var dk=ak.G;if(ck){zd(bk,ak.V);}else if(ck=!!ak.G){if("/"!=dk.charAt(0))if(this.I&&!this.G){dk="/"+dk;}else{var ek=bk.G.lastIndexOf("/");-1!=ek&&(dk=bk.G.substr(0,ek+1)+dk);}if(".."==dk||"."==dk){dk="";}else if(-1!=dk.indexOf("./")||-1!=dk.indexOf("/.")){for(var ek=0==dk.lastIndexOf("/",0),dk=dk.split("/"),fk=[],gk=0;gk<dk.length;){var hk=dk[gk++];"."==hk?ek&&gk==dk.length&&fk.push(""):".."==hk?((1<fk.length||1==fk.length&&""!=fk[0])&&fk.pop(),ek&&gk==dk.length&&fk.push("")):(fk.push(hk),ek=true);}dk=fk.join("/");}}ck?bk.G=dk:ck=""!==ak.a.toString();ck?ae(bk,ak.a.clone()):ck=!!ak.N;ck&&(bk.N=ak.N);return bk;};j.clone=function(){return new xd(this);};function yd(ak,bk,ck){ak.J=ck?be(bk,true):bk;ak.J&&(ak.J=ak.J.replace(/:$/,""));}function zd(ak,bk){if(bk){bk=Number(bk);if(isNaN(bk)||0>bk)throw Error("Bad port number "+bk);ak.V=bk;}else ak.V=null;}function ae(ak,bk,ck){bk instanceof je?ak.a=bk:(ck||(bk=ce(bk,he)),ak.a=new je(bk));}function be(ak,bk){return ak?bk?decodeURI(ak):decodeURIComponent(ak):"";}function ce(ak,bk,ck){return "string"==typeof ak?(ak=encodeURI(ak).replace(bk,de),ck&&(ak=ak.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ak):null;}function de(ak){ak=ak.charCodeAt(0);return "%"+(ak>>4&15).toString(16)+(ak&15).toString(16);}var ee=/[#\/\?@]/g,fe=/[\#\?:]/g,ge=/[\#\?]/g,he=/[\#\?@]/g,ie=/#/g;function je(ak){this.b=ak||null;}je.prototype.a=null;je.prototype.c=null;je.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return "";var ak=[],bk;for(bk in this.a)for(var ck=encodeURIComponent(bk),dk=this.a[bk],ek=0;ek<dk.length;ek++){var fk=ck;""!==dk[ek]&&(fk+="="+encodeURIComponent(dk[ek]));ak.push(fk);}return this.b=ak.join("&");};je.prototype.clone=function(){var ak=new je();ak.b=this.b;if(this.a){var bk={},ck;for(ck in this.a)bk[ck]=this.a[ck].concat();ak.a=bk;ak.c=this.c;}return ak;};function ke(ak,bk){var ck=(new DOMParser()).parseFromString(ak,"text/xml");if(!ck)return null;bk||(bk=[new xd("")]);return jf({m:bk},ck,le);}l("shaka.dash.mpd.parseMpd",ke);function le(){this.id=this.url=null;this.type="static";this.b=this.j=this.m=null;this.g=5;this.i=this.c=this.f=null;this.h=1;this.a=[];}function me(){this.g=this.f=this.c=this.m=this.a=this.start=this.id=null;this.b=[];}function ne(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=false;this.h=this.g=this.f=this.m=null;this.j=[];this.a=[];}function oe(){this.value=null;}function pe(){this.contentType=this.lang=this.id=null;}function qe(){this.a=this.b=this.g=this.m=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[];}function re(){this.value=this.schemeIdUri=this.b=null;this.children=[];this.a=this.pssh=null;}function se(){this.parsedPssh=this.psshBox=null;}function te(){this.url=null;}function ue(){this.url=null;}function ve(){this.m=null;this.g=1;this.c=this.b=this.a=this.f=null;}ve.prototype.clone=function(){var ak=new ve();ak.m=nf(this.m);ak.g=this.g;ak.f=this.f;ak.a=of(this.a);ak.b=of(this.b);ak.c=of(this.c);return ak;};function we(){this.a=this.url=null;}we.prototype.clone=function(){var ak=new we();ak.url=nf(this.url);ak.a=of(this.a);return ak;};function xe(){this.a=this.url=null;}xe.prototype.clone=function(){var ak=new xe();ak.url=nf(this.url);ak.a=of(this.a);return ak;};function ye(){this.m=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null;}ye.prototype.clone=function(){var ak=new ye();ak.m=nf(this.m);ak.a=this.a;ak.g=this.g;ak.c=this.c;ak.i=this.i;ak.h=of(this.h);ak.b=nf(this.b)||[];ak.f=of(this.f);return ak;};function ze(){this.a=this.b=null;}ze.prototype.clone=function(){var ak=new ze();ak.b=nf(this.b);ak.a=of(this.a);return ak;};function af(){this.b=1;this.a=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null;}af.prototype.clone=function(){var ak=new af();ak.b=this.b;ak.i=this.i;ak.a=this.a;ak.j=this.j;ak.h=this.h;ak.f=this.f;ak.g=this.g;ak.c=of(this.c);return ak;};function bf(){this.a=[];}bf.prototype.clone=function(){var ak=new bf();ak.a=nf(this.a)||[];return ak;};function cf(){this.c=this.a=this.b=null;}cf.prototype.clone=function(){var ak=new cf();ak.b=this.b;ak.a=this.a;ak.c=this.c;return ak;};function df(ak,bk){this.Z=ak;this.end=bk;}df.prototype.clone=function(){return new df(this.Z,this.end);};le.TAG_NAME="MPD";me.TAG_NAME="Period";ne.TAG_NAME="AdaptationSet";oe.TAG_NAME="Role";pe.TAG_NAME="ContentComponent";qe.TAG_NAME="Representation";re.TAG_NAME="ContentProtection";se.TAG_NAME="cenc:pssh";te.TAG_NAME="BaseURL";ue.TAG_NAME="Location";ve.TAG_NAME="SegmentBase";we.TAG_NAME="RepresentationIndex";xe.TAG_NAME="Initialization";ye.TAG_NAME="SegmentList";ze.TAG_NAME="SegmentURL";af.TAG_NAME="SegmentTemplate";bf.TAG_NAME="SegmentTimeline";cf.TAG_NAME="S";le.prototype.parse=function(ak,bk){this.url=ak.m;this.id=pf(bk,"id",wf);this.type=pf(bk,"type",wf)||"static";this.b=pf(bk,"mediaPresentationDuration",rf);this.g=pf(bk,"minBufferTime",rf,this.g);this.f=pf(bk,"minimumUpdatePeriod",rf,this.f);this.c=pf(bk,"availabilityStartTime",qf,this.c);this.i=pf(bk,"timeShiftBufferDepth",rf,this.i);this.h=pf(bk,"suggestedPresentationDelay",rf,this.h);var ck=ak.m,dk=lf(this,bk,te);this.m=ff(ck,dk);if(dk=jf(this,bk,ue))this.j=gf(ck,dk.url);this.a=lf(this,bk,me);};me.prototype.parse=function(ak,bk){this.id=pf(bk,"id",wf);this.start=pf(bk,"start",rf);this.a=pf(bk,"duration",rf);var ck=lf(this,bk,te);this.m=ff(ak.m,ck);this.c=jf(this,bk,ve);this.f=jf(this,bk,ye);this.g=jf(this,bk,af);this.b=lf(this,bk,ne);ef(this);};function ef(ak){for(var bk=[],ck=0;ck<ak.b.length;++ck){var dk=ak.b[ck];null!=dk.group&&(bk[dk.group]=true);}for(ck=0;ck<ak.b.length;++ck)if(dk=ak.b[ck],null==dk.group){for(var ek=1;1==bk[ek];)++ek;bk[ek]=true;dk.group=ek;}}ne.prototype.parse=function(ak,bk){var ck=jf(this,bk,pe)||{},dk=jf(this,bk,oe);this.id=pf(bk,"id",wf);this.group=pf(bk,"group",vf);this.lang=pf(bk,"lang",wf,ck.lang);this.contentType=pf(bk,"contentType",wf,ck.contentType);this.width=pf(bk,"width",uf);this.height=pf(bk,"height",uf);this.b=pf(bk,"mimeType",wf);this.i=pf(bk,"codecs",wf);this.c=dk&&"main"==dk.value;this.lang&&(this.lang=fb(this.lang));ck=lf(this,bk,te);this.m=ff(ak.m,ck);this.j=lf(this,bk,re);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=ak.c?hf(this,bk,ak.c):jf(this,bk,ve);this.g=ak.f?hf(this,bk,ak.f):jf(this,bk,ye);this.h=ak.g?hf(this,bk,ak.g):jf(this,bk,af);this.a=lf(this,bk,qe);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]));};oe.prototype.parse=function(ak,bk){this.value=pf(bk,"value",wf);};pe.prototype.parse=function(ak,bk){this.id=pf(bk,"id",wf);this.lang=pf(bk,"lang",wf);this.contentType=pf(bk,"contentType",wf);this.lang&&(this.lang=fb(this.lang));};qe.prototype.parse=function(ak,bk){this.id=pf(bk,"id",wf);this.bandwidth=pf(bk,"bandwidth",uf);this.width=pf(bk,"width",uf,ak.width);this.height=pf(bk,"height",uf,ak.height);this.f=pf(bk,"mimeType",wf,ak.b);this.h=pf(bk,"codecs",wf,ak.i);this.lang=ak.lang;var ck=lf(this,bk,te);this.m=ff(ak.m,ck);this.c=lf(this,bk,re);this.g=ak.f?hf(this,bk,ak.f):jf(this,bk,ve);this.b=ak.g?hf(this,bk,ak.g):jf(this,bk,ye);this.a=ak.h?hf(this,bk,ak.h):jf(this,bk,af);0==this.c.length&&(this.c=ak.j);};re.prototype.parse=function(ak,bk){this.b=bk;this.schemeIdUri=pf(bk,"schemeIdUri",wf);this.value=pf(bk,"value",wf);var ck=pf(bk,"cenc:default_KID",wf);ck&&(this.a=ck.replace(/[-]/g,""));this.pssh=jf(this,bk,se);this.children=Array.prototype.slice.call(bk.childNodes);};se.prototype.parse=function(ak,bk){var ck=mf(bk);if(ck){this.psshBox=lb(ck);try{this.parsedPssh=new cc(this.psshBox);}catch(dk){if(!(dk instanceof RangeError))throw dk;}}};te.prototype.parse=function(ak,bk){this.url=mf(bk);};ue.prototype.parse=function(ak,bk){this.url=mf(bk);};ve.prototype.parse=function(ak,bk){this.m=ak.m||this.m;this.g=pf(bk,"timescale",uf,this.g);this.f=pf(bk,"presentationTimeOffset",vf,this.f);this.a=pf(bk,"indexRange",sf,this.a);this.b=jf(this,bk,we)||this.b;this.c=jf(this,bk,xe)||this.c;};we.prototype.parse=function(ak,bk){var ck=pf(bk,"sourceURL",wf);this.url=gf(ak.m,ck);this.a=pf(bk,"range",sf,of(ak.a));};xe.prototype.parse=function(ak,bk){var ck=pf(bk,"sourceURL",wf);this.url=gf(ak.m,ck);this.a=pf(bk,"range",sf);};ye.prototype.parse=function(ak,bk){this.m=ak.m||this.m;this.a=pf(bk,"timescale",uf,this.a);this.g=pf(bk,"presentationTimeOffset",vf,this.g);this.c=pf(bk,"duration",uf,this.c);this.i=pf(bk,"startNumber",vf,this.i);this.h=jf(this,bk,xe)||this.h;var ck=lf(this,bk,ze);this.b=ck&&0<ck.length?ck:this.b;this.f=jf(this,bk,bf)||this.f;};ze.prototype.parse=function(ak,bk){var ck=pf(bk,"media",wf);this.b=gf(ak.m,ck);this.a=pf(bk,"mediaRange",sf);};af.prototype.parse=function(ak,bk){this.b=pf(bk,"timescale",uf,this.b);this.i=pf(bk,"presentationTimeOffset",vf,this.i);this.a=pf(bk,"duration",uf,this.a);this.j=pf(bk,"startNumber",vf,this.j);this.h=pf(bk,"media",wf,this.h);this.f=pf(bk,"index",wf,this.f);this.g=pf(bk,"initialization",wf,this.g);this.c=jf(this,bk,bf)||this.c;};bf.prototype.parse=function(ak,bk){this.a=lf(this,bk,cf);};cf.prototype.parse=function(ak,bk){this.b=pf(bk,"t",vf);this.a=pf(bk,"d",vf);this.c=pf(bk,"r",tf);};function ff(ak,bk){if(!bk||0===bk.length)return ak;for(var ck=[],dk=0;dk<bk.length;dk++){var ek=bk[dk].url;null==ak||0===ak.length?ck.push(new xd(ek)):(ek=gf(ak.slice(0,1),ek),ck.push(ek[0]));}return ck;}function gf(ak,bk){if(!bk)return ak;var ck=new xd(bk);return ak?ak.map(function(dk){return dk.resolve(ck);}):[ck];}function hf(ak,bk,ck){var dk=of(ck);(bk=kf(bk,ck.constructor.TAG_NAME))&&dk.parse(ak,bk);return dk;}function jf(ak,bk,ck){var dk=null;if(bk=kf(bk,ck.TAG_NAME))dk=new ck(),dk.parse(ak,bk);return dk;}function kf(ak,bk){for(var ck=null,dk=0;dk<ak.childNodes.length;dk++)if(ak.childNodes[dk].tagName==bk){if(ck)return null;ck=ak.childNodes[dk];}return ck;}function lf(ak,bk,ck){for(var dk=[],ek=0;ek<bk.childNodes.length;ek++)if(bk.childNodes[ek].tagName==ck.TAG_NAME){var fk=new ck();fk.parse.call(fk,ak,bk.childNodes[ek]);dk.push(fk);}return dk;}function mf(ak){ak=ak.firstChild;return ak.nodeType!=Node.TEXT_NODE?null:ak.nodeValue;}function nf(ak){return ak?ak.map(function(bk){return bk.clone();}):null;}function of(ak){return ak?ak.clone():null;}function pf(ak,bk,ck,dk){ak=ck(ak.getAttribute(bk));return null!=ak?ak:void 0!==dk?dk:null;}function qf(ak){if(!ak)return null;ak=Date.parse(ak);return isNaN(ak)?null:Math.floor(ak/1000);}function rf(ak){if(!ak)return null;var bk=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(ak);if(!bk)return null;ak=0;var ck=vf(bk[1]);ck&&(ak+=31536000*ck);(ck=vf(bk[2]))&&(ak+=2592000*ck);(ck=vf(bk[3]))&&(ak+=86400*ck);(ck=vf(bk[4]))&&(ak+=3600*ck);(ck=vf(bk[5]))&&(ak+=60*ck);bk=i.parseFloat(bk[6]);(bk=isNaN(bk)?null:bk)&&(ak+=bk);return ak;}function sf(ak){var bk=/([0-9]+)-([0-9]+)/.exec(ak);if(!bk)return null;ak=vf(bk[1]);if(null==ak)return null;bk=vf(bk[2]);return null==bk?null:new df(ak,bk);}function tf(ak){ak=i.parseInt(ak,10);return isNaN(ak)?null:ak;}function uf(ak){ak=i.parseInt(ak,10);return 0<ak?ak:null;}function vf(ak){ak=i.parseInt(ak,10);return 0<=ak?ak:null;}function wf(ak){return ak;}function xf(ak,bk){this.url=ak;this.b=bk||new yf();this.g=this.i=this.h=0;this.a=null;this.c=new ec();this.f=null;}function yf(){this.body=null;this.a=1;this.g=1000;this.c=0;this.method="GET";this.f="arraybuffer";this.b={};this.i=this.h=false;}function zf(ak){ag(ak);ak.b.body=null;ak.c.destroy();ak.c=null;ak.f=null;}function ag(ak){ak.a&&(ak.a.onload=null,ak.a.onreadystatechange=null,ak.a.onerror=null,ak.a.ontimeout=null);ak.a=null;}j=xf.prototype;j.Ca=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var ak=this.url.split(":")[1].split(";").pop().split(","),bk=ak.pop(),bk="base64"==ak.pop()?i.atob(bk.replace(/-/g,"+").replace(/_/g,"/")):i.decodeURIComponent(bk);"arraybuffer"==this.b.f&&(bk=kb(bk).buffer);ak=JSON.parse(JSON.stringify(new XMLHttpRequest()));ak.response=bk;ak.responseText=bk.toString();bk=this.c;bk.resolve(ak);zf(this);return bk;}if(0==this.url.lastIndexOf("idb:",0))return this.j();this.h++;this.i=Date.now();this.g||(this.g=this.b.g);this.a=new XMLHttpRequest();bk=this.url;this.f&&this.f.supportsCaching();this.a.open(this.b.method,bk,true);this.a.responseType=this.b.f;this.a.timeout=this.b.c;this.a.withCredentials=this.b.h;this.a.onload=this.Ja.bind(this);this.b.i&&(this.a.onreadystatechange=this.Na.bind(this));this.a.onerror=this.eb.bind(this);this.a.ontimeout=this.Sa.bind(this);for(ak in this.b.b)this.a.setRequestHeader(ak,this.b.b[ak]);this.a.send(this.b.body);return this.c;};function bg(ak,bk,ck){bk=Error(bk);bk.type=ck;bk.status=ak.a.status;bk.url=ak.url;bk.method=ak.b.method;bk.body=ak.b.body;bk.hb=ak.a;return bk;}j.Ja=function(ak){this.f&&this.f.sample(Date.now()-this.i,ak.loaded);200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),zf(this)):this.h<this.b.a?cg(this):(ak=bg(this,"HTTP error.","net"),this.c.reject(ak),zf(this));};j.Na=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED){var ak=Date.parse(this.a.getResponseHeader("Date"));ak&&(hb=ak-Date.now());}};j.eb=function(){var ak=bg(this,"Network failure.","net");this.c.reject(ak);zf(this);};j.Sa=function(){if(this.h<this.b.a){cg(this);}else{var ak=bg(this,"Request timed out.","net");this.c.reject(ak);zf(this);}};function cg(ak){ag(ak);i.setTimeout(ak.Ca.bind(ak),ak.g*(1+.5*(2*Math.random()-1)));ak.g*=2;}function dg(ak,bk,ck,dk){this.c=bk;this.h=ck||0;this.g=null!=dk?dk:null;this.b=this.a=null;this.i=ak;}function eg(ak,bk){return ak&&0!==ak.length?ak.map(function(ck){return ck.resolve(bk);}):[bk];}function fg(ak,bk,ck){if(ak.a)return ak.a;bk=bk||new yf();if(ak.h||ak.g)bk.b.Range="bytes="+(ak.h+"-"+(null!=ak.g?ak.g:""));ak.a=gg(ak,0,bk,ck);return ak.a;}dg.prototype.f=function(){if(this.b){this.a=null;var ak=this.b;if(ak.a&&ak.a.readyState!=XMLHttpRequest.DONE){ak.a.abort();var bk=bg(ak,"Request aborted.","aborted");ak.c.reject(bk);zf(ak);}this.b=null;}};function gg(ak,bk,ck,dk){var ek=ak.c[bk].toString();ak.i&&(ek=ak.i(ek,ck.b)||ek);ak.b=new xf(ek,ck);dk&&(ak.b.f=dk);ek=ak.b.Ca().then(ab(ak,function(fk){this.b=this.a=null;return Promise.resolve(fk.response);}));return ek=ek.catch(ab(ak,function(fk){if(this.a&&bk+1<this.c.length)return this.a=gg(this,bk+1,ck,dk);this.a=this.b=null;return Promise.reject(fk);}));}dg.prototype.clone=function(){return new dg(this.i,this.c.map(function(ak){return ak.clone();}),this.h,this.g);};dg.prototype.toString=function(){return this.c[0].toString();};function hg(ak,bk){this.a=new yf();this.a.f="text";this.a.a=3;this.a.c=1000*(null!=bk?bk:0);this.a.i=true;this.b=ak;}function ig(ak){var bk=ak.b;return fg(bk,ak.a).then(function(ck){if(ck=ke(ck,bk.c))return Promise.resolve(ck);ck=Error("MPD parse failure.");ck.type="mpd";return Promise.reject(ck);});}function jg(ak,bk,ck,dk){if(!bk.a)return null;var ek=bk.a.h;if(!ek)return bk.m?new dg(ak,bk.m,0,null):null;ck=kg(ek,bk.id,ck,bk.bandwidth,dk);if(!ck)return null;bk=eg(bk.m,ck);return new dg(ak,bk,0,null);}function kg(ak,bk,ck,dk,ek){var fk={RepresentationID:bk,Number:ck,Bandwidth:dk,Time:ek};ak=ak.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(hk,ik,jk){if("$$"==hk)return "$";var kk=fk[ik];if(null==kk)return hk;"RepresentationID"==ik&&jk&&(jk=void 0);hk=kk.toString();jk=i.parseInt(jk,10)||1;jk=Math.max(0,jk-hk.length);return Array(jk+1).join("0")+hk;});try{return new xd(ak);}catch(gk){if(gk instanceof URIError)return null;throw gk;}}function lg(ak,bk,ck){var dk=0;bk*=ck;ak=ak.a;ck=[];for(var ek=0;ek<ak.length&&ak[ek].a;++ek){var fk=ak[ek].b,fk=null!=fk?fk:dk,gk=ak[ek].c||0;0>gk&&(gk=ak[ek].a,gk=ek+1===ak.length?Math.ceil((ak[0].b+bk-fk)/gk)-1:Math.ceil((ak[ek+1].b-fk)/gk)-1);0<ck.length&&fk!=dk&&(ck[ck.length-1].end=fk);for(var hk=0;hk<=gk;++hk)dk=fk+ak[ek].a,ck.push({start:fk,end:dk}),fk=dk;}return ck;}function mg(ak,bk,ck){this.b=ak;this.a=bk;this.url=ck;}function ng(ak,bk){for(var ck=ak.length-1;0<=ck;--ck){var dk=ak[ck];if(bk>=dk.b&&(null==dk.a||bk<dk.a))return ck;}return -1;}function og(ak,bk){return ak.map(function(ck){return new mg(ck.b+bk,null!=ck.a?ck.a+bk:null,ck.url);});}function pg(){}pg.prototype.parse=function(ak,bk,ck,dk){var ek=null;try{var gk,hk=new ua(bk);if(440786851!=wa(hk).id){gk=null;}else{var ik=wa(hk);if(408125543!=ik.id){gk=null;}else{var jk=ik.a.byteOffset,kk,lk=new ua(ik.a);for(bk=null;wb(lk.a);){var mk=wa(lk);if(357149030==mk.id){bk=mk;break;}}if(bk){for(var nk=new ua(bk.a),lk=1e+06;wb(nk.a);){var ok=wa(nk);if(2807729==ok.id){lk=za(ok);break;}}kk=lk/1e+09;}else kk=null;gk=kk?{$a:jk,fb:kk}:null;}}if(gk){var pk=wa(new ua(ak));if(475249515!=pk.id){ek=null;}else{var qk=gk.$a,rk=gk.fb;ak=[];var sk=new ua(pk.a);for(gk=pk=-1;wb(sk.a);){var tk=wa(sk);if(187==tk.id){var uk,vk=new ua(tk.a),wk=wa(vk);if(179!=wk.id){uk=null;}else{var xk=za(wk),yk=wa(vk);if(183!=yk.id){uk=null;}else{for(var zk=new ua(yk.a),jk=0;wb(zk.a);){var al=wa(zk);if(241==al.id){jk=za(al);break;}}uk={gb:xk,Za:jk};}}if(uk){var bl=rk*uk.gb,cl=qk+uk.Za;if(0<=pk){var dl=new dg(dk,ck,gk,cl-1);ak.push(new mg(pk,bl,dl));}pk=bl;gk=cl;}}}0<=pk&&(dl=new dg(dk,ck,gk,null),ak.push(new mg(pk,null,dl)));ek=ak;}}else ek=null;}catch(fk){if(!(fk instanceof RangeError))throw fk;}return ek;};function qg(ak){this.a=ak;this.b=0;}qg.prototype.destroy=function(){this.a=null;};qg.prototype.length=function(){return this.a.length;};function rg(ak){if(0==ak.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return ak.a[0];}function sg(ak){if(0==ak.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return ak.a[ak.a.length-1];}qg.prototype.get=function(ak){if(0>ak||ak>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[ak];};function tg(ak,bk){var ck=ng(ak.a,bk);return 0<=ck?ak.a[ck]:null;}function ug(ak,bk){var ck=bk-ak.b;0!=ck&&(ak.a=og(ak.a,ck),ak.b=bk);}function vg(ak,bk,ck,dk,ek){this.b=bk;this.f=ck;this.a=null;this.c=ek;}vg.prototype.destroy=function(){this.c=this.f=this.b=null;this.a&&(this.a.destroy(),this.a=null);};vg.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var ak=this.f.b,bk=[];ak.f&&(bk=lg(ak.f,ak.a||1,this.b.a||0));var ck=0;ak.c&&ak.i?ck=ak.c*ak.i:0<bk.length&&(ck=bk[0].start-(ak.g||0));var dk=ck,ek=ak.b.length;0<bk.length&&bk.length!=ak.b.length&&(ek=Math.min(bk.length,ak.b.length));for(var fk=[],gk=0;gk<ek;++gk){var hk=ak.b[gk],ik=ck/ak.a,jk=null,kk=null;ak.c?(jk=ck+ak.c,kk=jk/ak.a):0<bk.length?(jk=bk[gk].end-(ak.g||0),kk=jk/ak.a):(kk=ik+this.b.a,jk=kk*ak.a);var ck=jk,jk=0,lk=null;hk.a&&(jk=hk.a.Z,lk=hk.a.end);kk=Math.min(this.b.a+dk/ak.a,kk);fk.push(new mg(ik,kk,new dg(this.c,hk.b,jk,lk)));}this.a=new qg(fk);return Promise.resolve(this.a);};function wg(ak,bk,ck,dk,ek){this.f=bk;this.b=ck;this.a=null;this.c=ek;}wg.prototype.destroy=function(){this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null);};wg.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var ak=this.b.a,bk=lg(ak.c,ak.b||1,this.f.a||0),ck=[],dk=0;dk<bk.length;++dk){var ek=bk[dk].start,fk=ek/ak.b,gk=bk[dk].end/ak.b,ek=jg(this.c,this.b,dk+ak.j,ek);if(!ek)return ak=Error("Failed to generate media URL."),ak.type="dash",Promise.reject(ak);var hk=(ak.i||0)/ak.b;ck.push(new mg(fk-hk,gk-hk,ek));}this.a=new qg(ck);return Promise.resolve(this.a);};function xg(ak,bk,ck,dk,ek){this.b=bk;this.c=ck;this.a=null;this.f=ek;}xg.prototype.destroy=function(){this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);};xg.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var ak,bk=this.c.a;bk:{ak=this.f;for(var ck=this.c,bk=Math.ceil(this.b.a/(bk.a/bk.b)),dk=ck.a,ek=[],fk=0;fk<bk;++fk){var gk=fk+1,hk=(gk-1)*dk.a,ik=hk/dk.b,hk=(hk+dk.a)/dk.b,gk=jg(ak,ck,gk-1+dk.j,(gk-1)*dk.a);if(!gk){ak=null;break bk;}ek.push(new mg(ik,hk,gk));}ak=ek;};ak?(0<ak.length&&(ck=ak[ak.length-1],ak[ak.length-1]=new mg(ck.b,this.b.a,ck.url)),ak=new qg(ak)):ak=null;this.a=ak;return this.a?Promise.resolve(this.a):(ak=Error("Failed to generate SegmentReferences"),ak.type="stream",Promise.reject(ak));};function yg(ak){this.b=ak;this.a=null;}yg.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null);};yg.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var ak=new mg(0,null,this.b);this.a=new qg([ak]);return Promise.resolve(this.a);};function zg(){}zg.prototype.parse=function(ak,bk,ck,dk){var ek=null;try{ak:{var gk=[],hk=new tb(ak),ik=yb(hk);if(1936286840!=yb(hk)){ek=null;}else{1==ik&&(ik=zb(hk));var jk=xb(hk);bc(hk,3);bc(hk,4);var kk=yb(hk);if(0==kk){ek=null;}else{var lk,mk;0==jk?(lk=yb(hk),mk=yb(hk)):(lk=zb(hk),mk=zb(hk));bc(hk,2);var nk=hk.b.getUint16(hk.a,hk.c);hk.a+=2;ak=lk;bk=bk+ik+mk;for(ik=0;ik<nk;ik++){var ok=yb(hk);mk=(ok&2147483648)>>>31;var jk=ok&2147483647,pk=yb(hk);yb(hk);if(1==mk){ek=null;break ak;}var qk=new dg(dk,ck,bk,bk+jk-1);gk.push(new mg(ak/kk,(ak+pk)/kk,qk));ak+=pk;bk+=jk;}ek=gk;}}};}catch(fk){if(!(fk instanceof RangeError))throw fk;}return ek;};function ah(ak,bk,ck,dk,ek,fk,gk){this.f=ck;this.a=dk;this.c=ek;this.h=this.b=null;this.g=gk;}ah.prototype.destroy=function(){this.g=null;this.a.f();this.a=null;this.c&&(this.c.f(),this.c=null);this.h&&(this.h.destroy(),this.h=null);this.b=null;};ah.prototype.create=function(){if(this.b)return this.b;var ak=[fg(this.a)];"webm"==this.f&&ak.push(fg(this.c));return this.b=Promise.all(ak).then(ab(this,function(bk){var ck=bk[0];bk=bk[1]||null;var dk=null;"mp4"==this.f?(dk=new zg(),dk=dk.parse(new DataView(ck),this.a.h,this.a.c,this.g)):"webm"==this.f&&(dk=new pg(),dk=dk.parse(new DataView(ck),new DataView(bk),this.a.c,this.g));return dk?Promise.resolve(new qg(dk)):(ck=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),ck.type="stream",Promise.reject(ck));}));};function bh(ak){this.a=ak;}bh.prototype.destroy=function(){this.a&&(this.a.f(),this.a=null);};bh.prototype.create=function(){return this.a?fg(this.a):Promise.resolve(null);};function ch(){this.b=dh++;this.id=this.K=this.F=null;this.h=0;this.height=this.width=this.bandwidth=null;this.f=this.c="";this.g=[];this.H=false;this.a=true;}var dh=0;ch.prototype.destroy=function(){this.F&&(this.F.destroy(),this.F=null);this.K&&(this.K.destroy(),this.K=null);};function eh(ak){var bk=ak.c||"";ak.f&&(bk+='; codecs="'+ak.f+'"');return bk;}function fh(){this.b=gh++;this.id=null;this.contentType=this.lang="";this.f=false;this.a=[];this.c=[];}var gh=0;fh.prototype.destroy=function(){for(var ak=0;ak<this.a.length;++ak)this.a[ak].destroy();this.c=this.a=null;};function hh(ak){for(var bk=[],ck=0;ck<ak.c.length;++ck){var dk=new kh();dk.id=ak.b;dk.a=ak.c[ck];dk.contentType=ak.contentType;dk.b=ak.a.length?eh(ak.a[0]):"";bk.push(dk);}return bk;}function ih(){this.id=null;this.start=0;this.b=null;this.a=[];}ih.prototype.destroy=function(){for(var ak=0;ak<this.a.length;++ak)this.a[ak].destroy();this.a=null;};function jh(){this.b=false;this.g=this.h=this.f=null;this.c=0;this.a=[];}jh.prototype.destroy=function(){for(var ak=0;ak<this.a.length;++ak)this.a[ak].destroy();this.a=null;};function kh(){this.id=0;this.a=null;this.b=this.contentType="";}function lh(ak){this.a=ak;}function mh(ak){if(ak.a.length){null==ak.a[0].start&&(ak.a[0].start=0);var bk=function(ik){return 0==ik||!!ik;};"dynamic"==ak.type&&(ak.b=null);bk(ak.b)&&1==ak.a.length&&!bk(ak.a[0].a)&&(ak.a[0].a=ak.b);for(var ck=0,dk=true,ek=0;ek<ak.a.length;++ek){var fk=ak.a[ek-1],gk=ak.a[ek],hk=ak.a[ek+1]||{start:ak.b};!bk(gk.start)&&fk&&bk(fk.start)&&bk(fk.a)&&(gk.start=fk.start+fk.a);!bk(gk.a)&&bk(hk.start)&&(gk.a=hk.start-gk.start);null!=gk.start&&null!=gk.a?ck+=gk.a:dk=false;}bk(ak.b)||(ek=ak.a[ak.a.length-1],dk?ak.b=ck:bk(ek.start)&&bk(ek.a)?ak.b=ek.start+ek.a:"dynamic"!=ak.type&&(ak.b=ck));}}function nh(ak,bk,ck,dk){var ek=new ih();ek.id=ck.id;ek.start=ck.start;ek.b=ck.a;var fk=new jc();ck.b.forEach(function(pk){fk.push(pk.contentType||"",pk);});for(var gk=mc(fk),hk=0;hk<gk.length;++hk){var ik=new jc();fk.get(gk[hk]).forEach(function(pk){ik.push(pk.group,pk);});for(var jk=mc(ik),kk=0;kk<jk.length;++kk){var lk=new jc();ik.get(jk[kk]).forEach(function(pk){lk.push(pk.lang,pk);});for(var mk=mc(lk),nk=0;nk<mk.length;++nk){var ok=lk.get(mk[nk]),ok=oh(ak,bk,ck,ok,dk);ek.a.push(ok);}}}return ek;}function oh(ak,bk,ck,dk,ek){z(dk.every(function(nk){return nk.group==dk[0].group&&(nk.lang||"")==(dk[0].lang||"")&&(nk.contentType||"")==(dk[0].contentType||"");}));var fk=new fh(),gk=dk.filter(function(nk){return null!=nk.id;});gk.length==dk.length&&(fk.id=gk.map(function(nk){return nk.id;}).sort().reduce(function(nk,ok){return nk+","+ok;}));fk.lang=dk[0].lang||"";fk.contentType=dk[0].contentType||"";fk.f=dk.some(function(nk){return nk.c;});for(var gk={},hk=0;hk<dk.length;++hk)for(var ik=dk[hk],jk=0;jk<ik.a.length;++jk){var kk=ik.a[jk],lk=rh(ak,kk),mk=fk.c.slice(0);qh(lk,mk);0==mk.length&&0<fk.c.length||!(kk=th(bk,ck,kk,ek))||(fk.a.push(kk),fk.c=mk,gk[kk.b]=ik);}if(fk.c.some(function(nk){return ""==nk.a;}))return fk.a.forEach(function(nk){nk.H=true;}),fk;ak=ph(dk);for(hk=0;hk<fk.a.length;++hk)kk=fk.a[hk],ik=gk[kk.b],ik==ak&&(kk.H=true);return fk;}function ph(ak){for(var bk=null,ck=null,dk=0;dk<ak.length;++dk)for(var ek=ak[dk],fk=0;fk<ek.a.length;++fk){var gk=ek.a[fk],gk=(gk.width||1)*(gk.height||1)*(gk.bandwidth||1);if(null==bk||gk<bk)bk=gk,ck=ek;}return ck;}function qh(ak,bk){if(0==bk.length){Array.prototype.push.apply(bk,ak);}else for(var ck=0;ck<bk.length;++ck){for(var dk=false,ek=0;ek<ak.length;++ek){var fk=bk[ck],gk=ak[ek];if(fk.a==gk.a&&fk.j==gk.j&&fk.o==gk.o&&fk.f==gk.f&&fk.g==gk.g&&fk.i==gk.i&&fk.l==gk.l&&fk.h==gk.h&&fk.s==gk.s&&nb(fk.c,gk.c)){dk=true;break;}}dk||(bk.splice(ck,1),--ck);}}function rh(ak,bk){var ck=[];if(0==bk.c.length){ck.push(new ob());}else if(ak.a)for(var dk=0;dk<bk.c.length;++dk)ck.push.apply(ck,sh(ak,bk.c[dk]));return ck;}function sh(ak,bk){var ck=[];if(2==ak.a.length){var dk=ak.a(bk.schemeIdUri,bk.b);if(!(dk&&dk instanceof Array))return [];for(var ek=0;ek<dk.length;++ek){var fk,gk=dk[ek];fk=new ob();if(gk){var hk=td(gk,"keySystem");if(null!=hk){fk.a=hk;}else throw Error("'keySystem' cannot be null.");var ik=td(gk,"licenseServerUrl");if(null!=ik){fk.j=ik;}else if(hk)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");hk=ud(gk,"withCredentials","boolean");null!=hk&&(fk.o=hk);hk=vd(gk,"licensePostProcessor",Function);null!=hk&&(fk.f=hk);hk=vd(gk,"licensePreProcessor",Function);null!=hk&&(fk.g=hk);hk=ud(gk,"distinctiveIdentifierRequired","boolean");null!=hk&&(fk.i=hk);hk=ud(gk,"persistentStateRequired","boolean");null!=hk&&(fk.l=hk);hk=td(gk,"audioRobustness");null!=hk&&(fk.h=hk);hk=td(gk,"videoRobustness");null!=hk&&(fk.s=hk);hk=vd(gk,"serverCertificate",Uint8Array);null!=hk&&(fk.c=hk);if(hk=vd(gk,"initData",Object)){gk=vd(hk,"initData",Uint8Array);if(null==gk)throw Error("'initData.initData' cannot be null.");hk=td(hk,"initDataType");if(null==hk)throw Error("'initData.initDataType' cannot be null.");fk.b.push({initData:new Uint8Array(gk.buffer),initDataType:hk});}}0==fk.b.length&&bk.pssh&&bk.pssh.psshBox&&pb(fk,[{initData:bk.pssh.psshBox,initDataType:"cenc"}]);ck.push(fk);}}else{dk=ak.a(bk);if(!(dk&&dk instanceof qb))return [];ek=new ob();ek.a=dk.g;ek.j=dk.j;ek.o=dk.o;ek.f=dk.h;ek.g=dk.i;ek.i=dk.f;ek.l=dk.l;ek.h=dk.c;ek.s=dk.s;ek.c=dk.b?new Uint8Array(dk.b.buffer):null;pb(ek,dk.a);ck.push(ek);}return ck;}function th(ak,bk,ck,dk){if(!ck.m||0===ck.m.length)return null;var ek=null,fk=1,gk=0;if(ck.g){bk=ck.f.split("/")[1],"mp4"!=bk&&"webm"!=bk?ek=null:(ak=ck.g,"webm"!=bk||ak.c?ak.a||ak.b&&ak.b.a?(ek=ak.b,ek||(ek=new we(),ek.url=ck.m,ek.a=ak.a?ak.a.clone():null),ek=vh(ek,dk),ak=ak.c?vh(ak.c,dk):null,dk=new ah(0,0,bk,ek,ak,0,dk),bk=new bh(ak),ak=new ch(),ak.F=dk,ak.K=bk,ek=ak):ek=null:ek=null),fk=ck.g.g,gk=ck.g.f;}else if(ck.b){ak=ck.b,!ak.c&&!ak.f&&1<ak.b.length?ek=null:ak.c||bk.a||ak.f||1!=ak.b.length?ak.f&&0===ak.f.a.length?ek=null:(ak=ak.h?vh(ak.h,dk):null,dk=new vg(0,bk,ck,0,dk),bk=new bh(ak),ak=new ch(),ak.F=dk,ak.K=bk,ek=ak):ek=null,fk=ck.b.a,gk=ck.b.g;}else if(ck.a){ak:if(ek=ck.a,fk=0+(ek.f?1:0),fk+=ek.c?1:0,fk+=ek.a?1:0,0==fk?fk=false:(1!=fk&&(ek.f?(ek.c=null,ek.a=null):ek.c&&(ek.a=null)),fk=true),fk){fk=null;if(ek.g&&(fk=(ek=ck.a.g)?uh(ck,ek,xe):null,!fk)){ek=null;break ak;}ek=fk?vh(fk,dk):null;fk=ck.a;fk.f?(bk=ck.f.split("/")[1],"mp4"!=bk&&"webm"!=bk?dk=null:"webm"!=bk||ek?jg(dk,ck,1,0)?(ak=(ak=ck.a.f)?uh(ck,ak,we):null)?(ak=vh(ak,dk),dk=new ah(0,0,bk,ak,ek,0,dk)):dk=null:dk=null:dk=null):dk=fk.h?fk.c?new wg(0,bk,ck,0,dk):fk.a?"dynamic"!=ak.type&&null==bk.a?null:new xg(0,bk,ck,0,dk):null:null;dk?(bk=new bh(ek),ak=new ch(),ak.F=dk,ak.K=bk,ek=ak):ek=null;}else ek=null;;fk=ck.a.b;gk=ck.a.i;}else "text"==ck.f.split("/")[0]&&(ek=new ch(),ek.F=new yg(new dg(dk,ck.m)));if(!ek)return null;ek.id=ck.id;gk&&(ek.h=-1*gk/fk);ek.bandwidth=ck.bandwidth;ek.width=ck.width;ek.height=ck.height;ek.c=ck.f||"";ek.f=ck.h||"";for(dk=0;dk<ck.c.length;++dk)bk=ck.c[dk],bk.a&&ek.g.push(bk.a);return ek;}function uh(ak,bk,ck){bk=kg(bk,ak.id,null,ak.bandwidth,null);if(!bk)return null;ck=new ck();ck.url=eg(ak.m,bk);return ck;}function vh(ak,bk){var ck=ak.url,dk=0,ek=null;ak.a&&(dk=ak.a.Z,ek=ak.a.end);return new dg(bk,ck,dk,ek);}function wh(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[];}function xh(ak,bk){var ck=new yh(bk);ak.streamHistory.push(new zh(ck));if(ck.videoHeight||!ak.streamStats)ak.streamStats=ck;}function yh(ak){this.videoWidth=ak.width;this.videoHeight=ak.height;this.videoMimeType=ak.c;this.videoBandwidth=ak.bandwidth;}function zh(ak){this.timestamp=(Date.now()+hb)/1000;this.value=ak;}function ai(ak,bk,ck,dk,ek){bd.call(this,ak);this.c=bk;this.a=new rc(ck,dk,ek);this.v=this.B=this.b=null;this.C=false;this.g=null;this.l=false;this.i=null;this.o=false;this.h=new ec();this.j=this.f=false;this.D=0;this.u=15;this.w=false;}m(ai,bd);ai.prototype.A=function(ak){null!=ak.initialStreamBufferSize&&(this.D=Number(ak.initialStreamBufferSize));null!=ak.streamBufferSize&&(this.u=Number(ak.streamBufferSize));null!=ak.segmentRequestTimeout&&(this.a.s=Number(ak.segmentRequestTimeout));};ai.prototype.destroy=function(){hi(this);this.h.destroy();this.b=this.h=null;this.a.destroy();this.s=this.c=this.a=null;};j=ai.prototype;j.ka=function(){return this.b;};j.wa=function(){return this.B;};j.Da=function(ak){this.f||ak.then(function(){this.f=true;this.g||gi(this,0);}.bind(this)).catch(function(){});return this.h;};j.xa=function(){return this.j;};j.ma=function(ak,bk,ck){ak!=this.b&&(this.v=ak.K.create(),ak.F.create().then(ab(this,function(dk){if(this.c){var ek=this.b;this.b=ak;this.B=dk;this.C=true;this.l||(ek?bk&&bi(this,true,ck):gi(this,0));}})).catch(ab(this,function(dk){"aborted"!=dk.type&&(this.f?(dk=ra(dk),this.dispatchEvent(dk)):this.h.reject(dk));})));};j.za=function(){return bi(this,false);};function bi(ak,bk,ck){ak.b&&!ak.l&&(ak.l=true,hi(ak),xc(ak.a).then(ab(ak,function(){var dk=this.c.currentTime;if(!bk&&0<tc(this.a,dk)&&0<=ng(this.a.b,dk))return Promise.resolve();if(ck)return wc(this.a,this.c.currentTime+ck);this.w=true;return vc(this.a);})).then(ab(ak,function(){this.l=false;gi(this,0);})).catch(ab(ak,function(dk){this.l=false;this.f?(dk=ra(dk),this.dispatchEvent(dk)):this.h.reject(dk);})));}j.Aa=function(ak){return 0<tc(this.a,ak)&&0<=ng(this.a.b,ak);};j.la=function(){};j.ra=function(){return true;};j.sa=function(){return this.o?this.u:Math.min(this.D,this.u);};j.Ua=function(){if(this.o&&!this.f){this.g=null;}else{var ak;if(ak=this.f&&!this.j)ak=1<this.a.c.buffered.length?true:false;if(ak){bi(this,true);}else{this.g=null;ak=this.b;var bk=this.B,ck=this.c.currentTime;tc(this.a,this.o?ck:ck+(this.i||0))>=this.sa()?(di(this),gi(this,1000/(Math.abs(this.c.playbackRate)||1))):(bk=ci(this,ck,bk))?(bk=uc(this.a,bk,ak.h,this.v),this.v=null,this.C&&(this.C=false,ei(this,ak)),this.j=false,bk.then(ab(this,function(dk){null==this.i&&(this.i=dk);this.w&&0<tc(this.a,ck)&&(this.w=false,this.c.currentTime+=.001);gi(this,0);})).catch(ab(this,function(dk){if("aborted"!=dk.type){var ek=[0,404,410];"net"==dk.type&&-1!=ek.indexOf(dk.hb.status)&&this.b&&gi(this,5000);dk=ra(dk);this.dispatchEvent(dk);}}))):(di(this),this.f&&!this.j&&(this.j=true,fi(this)),gi(this,1000));}}};function ci(ak,bk,ck){ak=ak.a;var dk=ak.b.length;ak=0<dk?ak.b[dk-1]:null;return null!=ak?null!=ak.a?tg(ck,ak.a):null:tg(ck,bk)||(ck.length()?sg(ck):null);}function di(ak){if(!ak.o&&null!=ak.i){ak.o=true;var bk=ak.a,ck=ak.i,dk=ck-bk.o;0!=dk&&(bk.b=og(bk.b,dk),bk.o=ck);ak.h.resolve(ak.i);}}function ei(ak,bk){var ck;ck=bk.c.split("/")[0];ck=qa({type:"adaptation",bubbles:true,contentType:ck,size:"video"!=ck?null:{width:bk.width,height:bk.height},bandwidth:bk.bandwidth});ak.dispatchEvent(ck);}function fi(ak){var bk=qa({type:"ended"});ak.dispatchEvent(bk);}function gi(ak,bk){ak.g=i.setTimeout(ak.Ua.bind(ak),bk);}function hi(ak){null!=ak.g&&(i.clearTimeout(ak.g),ak.g=null);}function ii(ak,bk){bd.call(this,ak);this.b=bk;this.h=true;this.g=this.f=null;this.c=new ec();this.a=null;}m(ii,bd);ii.prototype.A=function(){};ii.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.s=this.b=this.f=this.g=this.a=this.c=null;};j=ii.prototype;j.ka=function(){return this.f;};j.wa=function(){return this.g;};j.Da=function(){return this.c;};j.xa=function(){return true;};j.ma=function(ak){ak.F.create().then(ab(this,function(bk){if(this.b){if(0==bk.length())return Promise.reject(Error("No subtitles URL available."));var ck=this.f;this.f=ak;this.g=bk;bk=rg(bk).url.c[0].toString();var dk=this.ra();this.a&&(this.la(false),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=bk;this.la(dk);bk=qa({type:"adaptation",bubbles:true,contentType:"text",size:null,bandwidth:ak.bandwidth});this.dispatchEvent(bk);ck||this.c.resolve(0);}}));};j.za=function(){};j.Aa=function(){return true;};j.la=function(ak){this.h=ak;this.a&&(this.a.track.mode=ak?"showing":"disabled");};j.ra=function(){return this.h;};j.sa=function(){return 0;};function ji(ak,bk,ck,dk,ek){this.b=new dg(null,[new xd(ak)]);this.a=new yf();this.a.body=bk;this.a.method=ck;this.a.a=3;this.a.h=dk;this.a.c=0;ak=ek||{};for(var fk in ak)this.a.b[fk]=ak[fk];}function ki(ak){return fg(ak.b,ak.a).then(function(bk){return Promise.resolve(new Uint8Array(bk));});}function li(ak,bk,ck){bd.call(this,ak);this.b=bk;this.j=ck;this.a=this.f=null;this.i=new nc();this.g={};this.h=[];this.o=0;this.c=new ec();this.l=null;}m(li,bd);li.prototype.destroy=function(){this.s=null;for(var ak=0;ak<this.h.length;++ak)this.h[ak].close().catch(function(){});this.h=[];this.g=this.a=this.f=null;this.c.destroy();this.c=null;this.i.destroy();this.i=null;this.l&&(i.clearTimeout(this.l),this.l=null);this.b=this.j=null;};li.prototype.initialize=function(){var ak=new jc(),bk;bk=this.j;if(bk.w){bk=bk.a.a[0];for(var ck=[],dk=0;dk<bk.a.length;++dk)ck.push.apply(ck,hh(bk.a[dk]));bk=ck;}else bk=[];for(ck=0;ck<bk.length;++ck)dk=bk[ck],dk.a.a||dk.b&&!si(dk.b)||ak.push(dk.contentType,dk);for(var ck={},dk=false,ek=0;ek<bk.length;++ek){var fk=bk[ek];if(fk.a.a&&!ak.a.hasOwnProperty(fk.contentType)){var gk=fk.a.a,hk=ck[gk];hk||(hk=fk.a,hk={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:hk.i?"required":"optional",persistentState:hk.l?"required":"optional",sessionTypes:["temporary"]},ck[gk]=hk);if(fk.b&&(gk=fk.contentType+"Capabilities",gk in hk)){dk=true;hk[gk]||(hk[gk]=[]);var ik;"audio"==fk.contentType?ik=fk.a.h:"video"==fk.contentType&&(ik=fk.a.s);hk[gk].push({contentType:fk.b,robustness:ik});}}}if(!dk)if(bk.length){this.a=bk[0].a;}else throw ak=Error("No DrmInfo exists!"),ak.type="drm",ak;if(0==Object.keys(ck).length)return fj(this.j,ak),this.c.resolve(),Promise.resolve();ik=new ec();ck=mi(ck,ik);ck=ck.then(this.Fa.bind(this,bk,ak));ck=ck.then(this.ab.bind(this));ik.reject(null);return ck;};function mi(ak,bk){for(var ck in ak)bk=bk.catch(function(dk,ek){return navigator.requestMediaKeySystemAccess(dk,[ek]);}.bind(null,ck,ak[ck]));return bk;}j=li.prototype;j.Fa=function(ak,bk,ck){if(!this.b)return ni();for(var dk=ck.keySystem,ek=ck.getConfiguration(),fk=["audio","video"],gk=0;gk<fk.length;++gk){var hk=fk[gk];if(!bk.a.hasOwnProperty(hk)){var ik=ek[hk+"Capabilities"];if(ik&&ik.length){for(var ik=ik[0],jk=[],kk={},lk=0;lk<ak.length;++lk){var mk=ak[lk];if(mk.a.a==dk&&mk.b==ik.contentType&&!(mk.id in kk)){jk.push(mk);kk[mk.id]=true;var nk;if(this.a){nk=this.a;var mk=mk.a,ok=new ob();ok.a=nk.a;ok.j=nk.j;ok.o=nk.o;ok.f=nk.f;ok.g=nk.g;ok.i=nk.i;ok.l=nk.l;ok.h=nk.h;ok.s=nk.s;ok.c=nk.c?new Uint8Array(nk.c.buffer):null;pb(ok,nk.b);pb(ok,mk.b);nk=ok;}else nk=mk.a;this.a=nk;}}bk.a[hk]=jk;}}}fj(this.j,bk);return ck.createMediaKeys();};j.ab=function(ak){if(!this.b)return ni();this.f=ak;return this.b.setMediaKeys(this.f).then(ab(this,function(){return this.b?this.a.c?this.f.setServerCertificate(this.a.c):Promise.resolve():ni();})).then(ab(this,function(){if(!this.b)return ni();for(var bk=0;bk<this.a.b.length;++bk){var ck=this.a.b[bk];this.ya({type:"encrypted",initDataType:ck.initDataType,initData:ck.initData});}0==this.a.b.length&&oc(this.i,this.b,"encrypted",this.ya.bind(this));}));};function ni(){var ak=Error("EmeManager destroyed");ak.type="destroy";return Promise.reject(ak);}j.ya=function(ak){var bk=new Uint8Array(ak.initData),ck=Array.prototype.join.apply(bk);if(!this.g[ck]){try{var ek=oi(this);}catch(dk){ek=ra(dk);this.dispatchEvent(ek);this.c.reject(dk);return;}ak=ek.generateRequest(ak.initDataType,ak.initData);this.g[ck]=true;ak.catch(ab(this,function(fk){if(this.g){this.g[ck]=false;var gk=ra(fk);this.dispatchEvent(gk);this.c.reject(fk);}}));this.h.push(ek);}};function oi(ak){var bk=null,bk=ak.f.createSession();oc(ak.i,bk,"message",ak.Qa.bind(ak));oc(ak.i,bk,"keystatuseschange",ak.Ia.bind(ak));return bk;}j.Qa=function(ak){pi(this,ak.target,this.a,ak.message);};j.Ia=function(ak){ak=ak.target.keyStatuses;for(var bk={},ck=ak.keys(),dk=ck.next();!dk.done;dk=ck.next()){var ek=mb(new Uint8Array(dk.value)),dk=ak.get(dk.value);bk[ek]=dk;}ij(this.j,bk);};function pi(ak,bk,ck,dk){dk=qi(ck,dk);ki(new ji(dk.url,dk.body,dk.method,ck.o,dk.headers)).then(ab(ak,function(ek){ck.f&&(ek=ck.f(ek));return bk.update(ek);})).then(ab(ak,function(){var ek=qa({type:"sessionReady",detail:bk});this.dispatchEvent(ek);this.o++;this.o>=this.h.length&&this.c.resolve();})).catch(ab(ak,function(ek){ek.lb=bk;ek=ra(ek);this.dispatchEvent(ek);}));}function qi(ak,bk){var ck={url:ak.j,body:bk.slice(0),method:"POST",headers:{}};if(!ak.g)return ck;ak.g(ck);ck.url=td(ck,"url");if(null==ck.url)throw Error("'url' cannot be null.");if(!(ck.body instanceof ArrayBuffer||"string"==typeof ck.body||null==ck.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");ck.method=td(ck,"method");if("GET"!=ck.method&&"POST"!=ck.method)throw Error("'method' must be either 'GET' or 'POST'.");ck.headers=vd(ck,"headers",Object);if(null==ck.headers)throw Error("'headers' cannot be null.");return ck;}function ri(ak){bd.call(this,null);this.a=ak;this.b=null;this.f=new nc();this.j=this.l=null;this.A=0;this.v=null;this.i=false;this.C=true;this.g=new wh();this.c={enableAdaptation:true,streamBufferSize:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new r()};this.o=1;this.B=null;}m(ri,bd);l("shaka.player.Player",ri);ri.version="";ri.isBrowserSupported=function(){return !!i.MediaSource&&!!i.Promise&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement" in document&&!!i.Uint8Array;};ri.prototype.ba=function(ak){this.C=ak;};ri.prototype.setResumeAfterBuffering=ri.prototype.ba;function si(ak){return "text/vtt"==ak?!!i.VTTCue:MediaSource.isTypeSupported(ak);}ri.isTypeSupported=si;ri.setTextStyle=function(ak){var bk=document.getElementById("ShakaPlayerTextStyle");bk||(bk=document.createElement("style"),bk.id="ShakaPlayerTextStyle",document.head.appendChild(bk));for(bk=bk.sheet;bk.cssRules.length;)bk.deleteRule(0);bk.insertRule("::cue { "+ba(ak)+" }",0);};ri.prototype.destroy=function(){return this.u().then(ab(this,function(){this.f.destroy();this.a=this.f=null;})).catch(function(){});};ri.prototype.destroy=ri.prototype.destroy;ri.prototype.u=function(){if(!this.b)return Promise.resolve();this.i&&xi(this);this.a.pause();pc(this.f);wi(this);ui(this);this.l&&(this.l.destroy(),this.l=null);this.a.src="";var ak=this.a.setMediaKeys(null);this.b&&(this.b.destroy(),this.b=null);this.i=false;this.g=new wh();return ak;};ri.prototype.unload=ri.prototype.u;ri.prototype.ia=function(ak){dj(ak,this.a);var bk=this.u();this.a.autoplay&&(la("load"),oc(this.f,this.a,"timeupdate",this.Ha.bind(this)));ak.ha(this.c);ak.L=this.B;this.B=null;bk=bk.then(ab(this,function(){return ak.X();}));bk.catch(ab(this,function(ck){ak.destroy();return Promise.reject(ck);}));return bk.then(ab(this,function(){if(!this.a)return ti();this.b=ak;oc(this.f,this.b,"seekrangechanged",this.Oa.bind(this));this.l=new li(this,this.a,this.b);return this.l.initialize();})).then(ab(this,function(){if(!this.a)return ti();oc(this.f,this.a,"error",this.bb.bind(this));oc(this.f,this.a,"playing",this.Ma.bind(this));oc(this.f,this.a,"pause",this.La.bind(this));return ej(this.b,this,this.a);})).then(ab(this,function(){if(!this.a)return ti();vi(this);})).catch(ab(this,function(ck){if(!this.a)return ti();if("destroy"!=ck.type){var dk=ra(ck);this.dispatchEvent(dk);}return this.u().then(function(){return Promise.reject(ck);});}));};ri.prototype.load=ri.prototype.ia;function ti(){var ak=Error("Player destroyed");ak.type="destroy";return Promise.reject(ak);}j=ri.prototype;j.Ha=function(){ma("load");this.g.playbackLatency=na("load")/1000;this.f.$(this.a,"timeupdate");};j.bb=function(){if(this.a.error){var ak=this.a.error.code;ak!=MediaError.MEDIA_ERR_ABORTED&&(ak=Error(yi[ak]||"Unknown playback error."),ak.type="playback",ak=ra(ak),this.dispatchEvent(ak));}};j.Ma=function(){la("playing");!this.j&&0>this.o&&(this.a.playbackRate=0,this.w(this.a.currentTime,Date.now(),this.o));this.i&&xi(this);};j.La=function(){ma("playing");var ak=na("playing");if(!isNaN(ak)){var bk=this.g;bk.playTime+=ak/1000;}ui(this);};j.Oa=function(ak){this.A=ak.start;};j.Ba=function(){if(!this.a.paused){ma("playing");var ak=na("playing");if(!isNaN(ak)){var bk=this.g;bk.playTime+=ak/1000;la("playing");}}ak=this.g;bk=this.a;bk.getVideoPlaybackQuality&&(bk=bk.getVideoPlaybackQuality(),ak.decodedFrames=bk.totalVideoFrames,ak.droppedFrames=bk.droppedVideoFrames);return this.g;};ri.prototype.getStats=ri.prototype.Ba;ri.prototype.ha=function(){return this.b?this.b.D():[];};ri.prototype.getVideoTracks=ri.prototype.ha;ri.prototype.ea=function(){return this.b?this.b.S():[];};ri.prototype.getAudioTracks=ri.prototype.ea;ri.prototype.ga=function(){return this.b?this.b.ia():[];};ri.prototype.getTextTracks=ri.prototype.ga;ri.prototype.selectVideoTrack=function(ak,bk){return this.b?this.b.selectVideoTrack(ak,void 0==bk?true:bk):false;};ri.prototype.selectVideoTrack=ri.prototype.selectVideoTrack;ri.prototype.ja=function(ak,bk){return this.b?kj(this.b,"audio",ak,void 0==bk?true:bk):false;};ri.prototype.selectAudioTrack=ri.prototype.ja;ri.prototype.na=function(ak){return this.b?kj(this.b,"text",ak,false):false;};ri.prototype.selectTextTrack=ri.prototype.na;ri.prototype.da=function(ak){this.b&&gj(this.b,ak);};ri.prototype.enableTextTrack=ri.prototype.da;ri.prototype.L=function(ak){this.h({enableAdaptation:ak});};ri.prototype.enableAdaptation=ri.prototype.L;ri.prototype.M=function(){return this.c.enableAdaptation;};ri.prototype.getAdaptationEnabled=ri.prototype.M;ri.prototype.ca=function(ak){this.h({streamBufferSize:ak});};ri.prototype.setStreamBufferSize=ri.prototype.ca;ri.prototype.S=function(){return Number(this.c.streamBufferSize);};ri.prototype.getStreamBufferSize=ri.prototype.S;ri.prototype.pa=function(ak){this.h({licenseRequestTimeout:ak/1000});};ri.prototype.setLicenseRequestTimeout=ri.prototype.pa;ri.prototype.U=function(ak){this.h({mpdRequestTimeout:ak/1000});};ri.prototype.setMpdRequestTimeout=ri.prototype.U;ri.prototype.Y=function(ak){this.h({segmentRequestTimeout:ak/1000});};ri.prototype.setRangeRequestTimeout=ri.prototype.Y;ri.prototype.X=function(ak){this.h({preferredLanguage:ak});};ri.prototype.setPreferredLanguage=ri.prototype.X;ri.prototype.W=function(ak){ui(this);0<=ak?this.a.playbackRate=ak:this.a.paused||(this.a.playbackRate=0,this.w(this.a.currentTime,Date.now(),ak));this.o=ak;};ri.prototype.setPlaybackRate=ri.prototype.W;ri.prototype.P=function(){return this.o;};ri.prototype.getPlaybackRate=ri.prototype.P;ri.prototype.aa=function(ak){this.h({restrictions:ak});};ri.prototype.setRestrictions=ri.prototype.aa;ri.prototype.R=function(){return this.c.restrictions.clone();};ri.prototype.getRestrictions=ri.prototype.R;ri.prototype.qa=function(ak){this.B=ak;};ri.prototype.setPlaybackStartTime=ri.prototype.qa;ri.prototype.D=function(){var ak;this.b?(ak=this.b,ak=ak.a?ak.a.b:false):ak=false;return ak;};ri.prototype.isLive=ri.prototype.D;ri.prototype.h=function(ak){if(ak){var bk=ud(ak,"enableAdaptation","boolean");null!=bk&&(this.c.enableAdaptation=bk);bk=sd(ak,"streamBufferSize");null!=bk&&(this.c.streamBufferSize=bk);bk=sd(ak,"licenseRequestTimeout");null!=bk&&(this.c.licenseRequestTimeout=bk);bk=sd(ak,"mpdRequestTimeout");null!=bk&&(this.c.mpdRequestTimeout=bk);bk=sd(ak,"segmentRequestTimeout");null!=bk&&(this.c.segmentRequestTimeout=bk);bk=td(ak,"preferredLanguage");null!=bk&&(this.c.preferredLanguage=bk);ak=vd(ak,"restrictions",r);null!=ak&&(this.c.restrictions=ak.clone());this.b&&this.b.ha(this.c);}};ri.prototype.configure=ri.prototype.h;ri.prototype.fa=function(){return this.c;};ri.prototype.getConfiguration=ri.prototype.fa;function ui(ak){ak.j&&(i.clearTimeout(ak.j),ak.j=null);}function vi(ak){wi(ak);ak.v=i.setTimeout(ak.T.bind(ak),100);}function wi(ak){ak.v&&(i.clearTimeout(ak.v),ak.v=null);}ri.prototype.w=function(ak,bk,ck){this.j=null;var dk=(Date.now()-bk)/1000*ck;this.a.currentTime<this.A+(this.D()?1:.05)?this.a.pause():(dk=Math.max(this.A,ak+dk),this.a.currentTime=dk,this.j=i.setTimeout(this.w.bind(this,ak,bk,ck),250));};function xi(ak){ma("buffering");var bk=ak.g;bk.bufferingTime+=na("buffering")/1000;ak.i=false;ak.dispatchEvent(qa({type:"bufferingEnd"}));}ri.prototype.T=function(){vi(this);if(!this.a.ended&&!this.a.seeking){var ak=this.a.buffered,bk=ak.length?ak.end(ak.length-1):0,ak=Math.max(bk-this.a.currentTime,0),ck=this.a.duration,dk=this.a.currentTime;if(this.i){var ek,bk=this.b,fk=null;for(ek in bk.c){var gk=bk.c[ek].sa();0<gk&&(fk=null!=fk?Math.min(fk,gk):gk);}ek=fk||0;ck=Math.max(ck-dk-.05,0);if(ak>ek||ak>ck)xi(this),this.C&&this.a.play();}else ck=isNaN(ck)?0:Math.max(ck-.05,0),!(this.a.paused||bk>=ck||dk>=ck)&&.2>ak&&(this.i=true,this.a.pause(),this.g.bufferingHistory.push((Date.now()+hb)/1000),la("buffering"),this.dispatchEvent(qa({type:"bufferingStart"})));}};var yi={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function zi(){this.a=this.b=null;this.f=new nc();this.c=Number.POSITIVE_INFINITY;this.i=true;this.g=false;}l("shaka.media.SimpleAbrManager",zi);zi.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null;};zi.prototype.initialize=function(ak,bk){this.b||this.a||(this.b=ak,this.a=bk);};zi.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4000,oc(this.f,this.b,"bandwidth",this.l.bind(this)),oc(this.f,this.a,"adaptation",this.j.bind(this)),oc(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=true);};zi.prototype.enable=function(ak){this.i=ak;};zi.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var ak=aj(this);return ak?ak.id:null;};zi.prototype.selectVideoTrack=function(ak,bk,ck){this.g&&this.a.selectVideoTrack(ak.id,bk,ck);};zi.prototype.l=function(){Date.now()<this.c||this.h();};zi.prototype.h=function(){if(this.i){var ak=aj(this);if(ak){if(ak.active){this.c=Date.now()+3000;return;}this.selectVideoTrack(ak,false);}this.c=Number.POSITIVE_INFINITY;}};zi.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+30000);};function aj(ak){var bk=ak.a.D();if(0==bk.length)return null;bk.sort(q);var ck;ak:{ck=ak.a.S();for(var dk=0;dk<ck.length;++dk)if(ck[dk].active){ck=ck[dk];break ak;}ck=null;};ck=ck?ck.bandwidth:0;ak=ak.b.getBandwidth();for(var dk=bk[0],ek=0;ek<bk.length;++ek){var fk=bk[ek],gk=ek+1<bk.length?bk[ek+1]:{bandwidth:Number.POSITIVE_INFINITY};if(fk.bandwidth&&(gk=(gk.bandwidth+ck)/.85,ak>=(fk.bandwidth+ck)/.95&&ak<=gk&&(dk=fk,dk.active)))break;}return dk;}function bj(ak,bk){var ck=ak.bandwidth||Number.MAX_VALUE,dk=bk.bandwidth||Number.MAX_VALUE;return ck<dk?-1:ck>dk?1:0;}function cj(ak,bk,ck){bd.call(this,null);this.a=ak;this.T=bk;this.j=new nc();this.g=new MediaSource();this.f=null;this.da=0;this.b=new jc();this.o=ck;this.o.initialize(bk,this);this.w=false;this.v="en";this.U=false;this.A=null;this.i=new ec();this.ja=new ec();this.h=new r();this.l=null;this.ea=1;this.c={};this.P=new ec();this.B=0;this.aa=false;this.u={};this.L=this.C=this.Y=null;this.M={};}m(cj,bd);l("shaka.player.StreamVideoSource",cj);cj.prototype.ha=function(ak){null!=ak.streamBufferSize&&(this.M.streamBufferSize=ak.streamBufferSize);null!=ak.segmentRequestTimeout&&(this.M.segmentRequestTimeout=ak.segmentRequestTimeout);yj(this);null!=ak.enableAdaptation&&this.o.enable(Boolean(ak.enableAdaptation));null!=ak.mpdRequestTimeout&&(this.da=Number(ak.mpdRequestTimeout));null!=ak.preferredLanguage&&(this.v=fb(String(ak.preferredLanguage)));null!=ak.restrictions&&(this.h=ak.restrictions,this.w&&hj(this));};cj.prototype.destroy=function(){this.i.destroy();this.P.destroy();this.P=this.i=null;this.C&&(i.clearTimeout(this.C),this.C=null);this.Y&&(i.clearTimeout(this.Y),this.Y=null);this.u=null;this.j.destroy();this.j=null;rd(this.c).forEach(function(ak){ak.destroy();});this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null);this.o.destroy();this.s=this.h=this.A=this.f=this.g=this.T=this.o=null;};function dj(ak,bk){oc(ak.j,ak.g,"sourceopen",ak.Ka.bind(ak));bk.src=i.URL.createObjectURL(ak.g);}function ej(ak,bk,ck){if(!ak.w)return ak=Error("Cannot call attach() right now."),ak.type="stream",Promise.reject(ak);ak.s=bk;ak.f=ck;ak.A=bk.Ba();oc(ak.j,ak.T,"bandwidth",ak.cb.bind(ak));bk=ak.f.setMediaKeys(ak.f.mediaKeys);ak.ja.then(ab(ak,function(){mj(this).then(ab(this,function(){this.i&&this.i.resolve();})).catch(ab(this,function(dk){this.i&&this.i.reject(dk);}));}));return Promise.all([ak.i,bk]);}cj.prototype.X=function(){if(this.w){var ak=Error("Cannot call load() right now.");ak.type="stream";return Promise.reject(ak);}if(!this.a||0==this.a.a.length)return ak=Error("The manifest does not specify any content."),ak.type="stream",Promise.reject(ak);if(this.a.b)return ak=Error("Live manifest support not enabled."),ak.type="stream",Promise.reject(ak);for(var ak=this.a.a,bk=0;bk<ak.length;++bk)for(var ck=ak[bk],dk=0;dk<ck.a.length;++dk){for(var ek=ck.a[dk],fk=ek,gk=0;gk<fk.a.length;++gk)si(eh(fk.a[gk]))||(fk.a.splice(gk,1),--gk);0==ek.a.length&&(ck.a.splice(dk,1),--dk);}for(bk=0;bk<ak.length;++bk)for(ck=ak[bk],dk=0;dk<ck.a.length;++dk)ck.a[dk].a.sort(bj);if(0==this.a.a.length||0==this.a.a[0].a.length)return ak=Error("The manifest specifies content that cannot be displayed on this browser/platform."),ak.type="stream",Promise.reject(ak);this.w=true;this.M.initialStreamBufferSize=this.a.c;yj(this);hj(this);return Promise.resolve();};cj.prototype.D=function(){if(!this.b.a.hasOwnProperty("video"))return [];for(var ak=this.c.video,ak=(ak=ak?ak.ka():null)?ak.b:0,bk=[],ck=this.b.get("video"),dk=0;dk<ck.length;++dk)for(var ek=ck[dk],fk=0;fk<ek.a.length;++fk){var gk=ek.a[fk];if(gk.H&&gk.a){var hk=gk.b,gk=new p(hk,gk.bandwidth,gk.width,gk.height);hk==ak&&(gk.active=true);bk.push(gk);}}return bk;};cj.prototype.getVideoTracks=cj.prototype.D;cj.prototype.S=function(){if(!this.b.a.hasOwnProperty("audio"))return [];for(var ak=this.c.audio,ak=(ak=ak?ak.ka():null)?ak.b:0,bk=[],ck=this.b.get("audio"),dk=0;dk<ck.length;++dk)for(var ek=ck[dk],fk=ek.lang,gk=0;gk<ek.a.length;++gk){var hk=ek.a[gk];if(hk.H&&hk.a){var ik=hk.b,hk=new n(ik,hk.bandwidth,fk);ik==ak&&(hk.active=true);bk.push(hk);}}return bk;};cj.prototype.getAudioTracks=cj.prototype.S;cj.prototype.ia=function(){if(!this.b.a.hasOwnProperty("text"))return [];for(var ak=this.c.text,bk=ak?ak.ka():null,bk=bk?bk.b:0,ck=[],dk=this.b.get("text"),ek=0;ek<dk.length;++ek)for(var fk=dk[ek],gk=fk.lang,hk=0;hk<fk.a.length;++hk){var ik=fk.a[hk].b,jk=new o(ik,gk);ik==bk&&(jk.active=true,jk.enabled=ak.ra());ck.push(jk);}return ck;};cj.prototype.getTextTracks=cj.prototype.ia;function fj(ak,bk){if(ak.w){for(var ck={},dk=ak.a.a[0],ek=0;ek<dk.a.length;++ek){var fk=dk.a[ek];ck[fk.b]=fk;}ak.b.a={};dk=mc(bk);for(ek=0;ek<dk.length;++ek){var fk=dk[ek],gk=bk.get(fk);if("video"==fk){var hk=gk[0].id;ak.b.push(fk,ck[hk]);}else if("audio"==fk){for(var hk=gk[0].b.split(";")[0],ik=0;ik<gk.length;++ik){var jk=gk[ik];jk.b.split(";")[0]==hk&&ak.b.push(fk,ck[jk.id]);}}else for(ik=0;ik<gk.length;++ik)hk=gk[ik].id,ak.b.push(fk,ck[hk]);}ak.U=true;if(ck=ak.b.get("audio"))lj(ak,ck),ak.b.a.audio=ck,ck=ck[0].lang||ak.v,cb(2,ak.v,ck)&&(ak.U=false);if(ck=ak.b.get("text"))lj(ak,ck),ak.b.a.text=ck,ck=ck[0].lang||ak.v,cb(2,ak.v,ck)||(ak.U=false);}}cj.prototype.selectVideoTrack=function(ak,bk,ck){return kj(this,"video",ak,bk,ck);};function gj(ak,bk){var ck=ak.c.text;ck&&ck.la(bk);}function hj(ak){if(ak.h){for(var bk=false,ck=0;ck<ak.a.a.length;++ck)for(var dk=ak.a.a[ck],ek=0;ek<dk.a.length;++ek){var fk=dk.a[ek];if("video"==fk.contentType)for(var gk=0;gk<fk.a.length;++gk){var hk=fk.a[gk],ik=hk.a;hk.a=true;ak.h.maxWidth&&hk.width>ak.h.maxWidth&&(hk.a=false);ak.h.maxHeight&&hk.height>ak.h.maxHeight&&(hk.a=false);ak.h.maxBandwidth&&hk.bandwidth>ak.h.maxBandwidth&&(hk.a=false);ak.h.minBandwidth&&hk.bandwidth<ak.h.minBandwidth&&(hk.a=false);ik!=hk.a&&(bk=true);}}0!=kc(ak.b).length&&bk&&(jj(ak),0<ak.D().length||(bk=Error("The applicaion has restricted all video tracks!"),bk.type="stream",bk=ra(bk),ak.dispatchEvent(bk)));}}function ij(ak,bk){for(var ck,dk=false,ek=new jc(),fk=kc(ak.b),gk=0;gk<fk.length;++gk)for(var hk=fk[gk],ik=0;ik<hk.a.length;++ik){var jk=hk.a[ik];jk.g.forEach(function(kk){ek.push(kk,jk);});}for(ck in bk)if(fk=dc[bk[ck]]||null,hk=ek.get(ck)){for(gk=0;gk<hk.length;++gk)jk=hk[gk],ik=jk.H,jk.H=!fk,ik!=jk.H&&(dk=true);}else ib(ck);dk&&(jj(ak),dk=ak.S(),ck=ak.D(),dk=ak.b.a.hasOwnProperty("audio")&&0==dk.length,ck=ak.b.a.hasOwnProperty("video")&&0==ck.length,dk||ck)&&(ck=Error("The key system has restricted all "+(dk&&ck?"audio and video tracks.":dk?"audio tracks.":"video tracks.")),ck.type="drm",ck=ra(ck),ak.dispatchEvent(ck));}function jj(ak){var bk=qa({type:"trackschanged",bubbles:true});ak.dispatchEvent(bk);}function kj(ak,bk,ck,dk,ek){if(!ak.b.a.hasOwnProperty(bk)||!ak.c[bk])return false;for(var fk=ak.b.get(bk),gk=0;gk<fk.length;++gk)for(var hk=fk[gk],ik=0;ik<hk.a.length;++ik){var jk=hk.a[ik];if(jk.b==ck){if(!jk.H||!jk.a)return false;if("text"!=bk&&!ak.aa)return ck=ak.u[bk],ak.u[bk]={Ea:jk,ua:null!=ck&&ck.ua||dk,va:null!=ck&&ck.va||ek},true;xh(ak.A,jk);ak.c[bk].ma(jk,dk,ek);return true;}}return false;}function lj(ak,bk){for(var ck=0;2>=ck;++ck)for(var dk=0;dk<bk.length;++dk){var ek=bk[dk];if(cb(ck,ak.v,ek.lang)){bk.splice(dk,1);bk.splice(0,0,ek);return;}}for(dk=0;dk<bk.length;++dk)if(ek=bk[dk],ek.f){bk.splice(dk,1);bk.splice(0,0,ek);break;}}j=cj.prototype;j.Ka=function(){this.j.$(this.g,"sourceopen");this.ja.resolve();};function mj(ak){for(var bk=[],ck=["audio","video","text"],dk=0;dk<ck.length;++dk){var ek=ck[dk];ak.b.a.hasOwnProperty(ek)&&bk.push(ak.b.get(ek)[0]);}for(var fk=nj(ak,bk),dk=0;dk<ck.length;++dk)if(ek=ck[dk],ak.b.a.hasOwnProperty(ek)&&!fk[ek])return ak=Error("Unable to select an initial "+ek+" stream: all "+ek+" streams have been restricted (by the application or by the key system)."),ak.type="stream",Promise.reject(ak);bk=rd(fk).map(function(gk){return gk.F.create();});return Promise.all(bk).then(ab(ak,function(gk){if(!gk.every(function(hk){return hk.length();}))return gk=Error("Some streams are not available."),gk.type="stream",Promise.reject(gk);gk=wj(this,gk);if(!gk)return gk=Error("Some streams are not available."),gk.type="stream",Promise.reject(gk);if(!oj(this,fk))return gk=Error("Failed to create Stream objects."),gk.type="stream",Promise.reject(gk);this.o.start();qj(this,fk,gk);return Promise.resolve();})).catch(ab(ak,function(gk){if("aborted"!=gk.type)return Object.keys(this.c),this.a.b?(this.jb(),Promise.resolve()):Promise.reject(gk);}));}function nj(ak,bk){for(var ck={},dk=0;dk<bk.length;++dk){var ek=bk[dk],fk=null;if("video"==ek.contentType){var gk=ak.o.getInitialVideoTrackId();if(null==gk)continue;fk=ek.a.filter(function(hk){return hk.b==gk;});if(0==fk.length)continue;fk=fk[0];}else if("audio"==ek.contentType){fk=ek.a.filter(function(hk){return hk.H&&hk.a;});if(0==fk.length)continue;fk=ek.a[Math.floor(fk.length/2)];}else 0<ek.a.length&&(fk=ek.a[0]);ck[ek.contentType]=fk;}return ck;}function oj(ak,bk){var ck={},dk;for(dk in bk){var ek=bk[dk],ek="text"==dk?new ii(ak,ak.f):pj(ak,ek);if(!ek)return rd(ck).forEach(function(fk){fk.destroy();}),false;ck[dk]=ek;}ak.c=ck;return true;}function pj(ak,bk){var ck=new ai(ak,ak.f,ak.g,eh(bk),ak.T);ck.A(ak.M);return ck;}function qj(ak,bk,ck){ak.ea=ak.f.playbackRate;ak.f.playbackRate=0;sj(ak,ck);var dk;dk=ak.a.b?ck.end:ak.L&&ak.L<=ck.end&&ak.L>=ck.start?ak.L:ck.start;oc(ak.j,ak.f,"seeking",ak.Pa.bind(ak));ak.f.currentTime!=dk&&(ak.f.currentTime=dk,ak.l=dk);tj(ak,ck.start,ck.end);ck=[];for(var ek in ak.c){dk=ak.c[ek];ck.push(dk.Da(ak.P));oc(ak.j,dk,"ended",ak.Ra.bind(ak));var fk=bk[ek];xh(ak.A,fk);dk.ma(fk,false);}Promise.all(ck).then(ak.Ga.bind(ak)).catch(ab(ak,function(gk){"destroy"!=gk.type&&(gk=ra(gk),this.dispatchEvent(gk));}));gj(ak,ak.U);}j.Ga=function(ak){z(ak&&ak.length==Object.keys(this.c).length);for(var bk=Number.POSITIVE_INFINITY,ck=Number.NEGATIVE_INFINITY,dk=0;dk<ak.length;++dk)var ek=ak[dk],bk=Math.min(bk,ek),ck=Math.max(ck,ek);ak=vj(this);for(dk=0;dk<ak.length;++dk)ug(ak[dk],ck);rj(this,ak,ck);dk=kc(this.b).map(function(fk){return fk.a;}).reduce(function(fk,gk){return fk.concat(gk);},[]).map(function(fk){var gk=[fk.F.create()];fk.K&&gk.push(fk.K.create());return Promise.all(gk);});Promise.all(dk).then(ab(this,function(fk){for(var gk=0;gk<fk.length;++gk)ug(fk[gk][0],ck);this.aa=true;for(var hk in this.u)fk=this.u[hk],gk=this.c[hk],xh(this.A,fk.Ea),gk.ma(fk.Ea,fk.ua,fk.va);this.u={};})).catch(ab(this,function(fk){"aborted"!=fk.type&&(fk=ra(fk),this.dispatchEvent(fk));}));};function rj(ak,bk,ck){if(bk=wj(ak,bk))sj(ak,bk),tj(ak,bk.start,bk.end);0!=ck?(ck=ak.f.currentTime+ck,ak.f.currentTime=ck,ak.l=ck):ck=ak.f.currentTime;ak.a.b&&bk&&(ak.B=bk.end-ck,ak.B=Math.max(ak.B,0));ak.f.playbackRate=ak.ea;ak.a.b&&null!=ak.a.f&&ak.kb(ak.B);xj(ak);ak.P.resolve();}function sj(ak,bk){if(ak.a.b){isNaN(ak.g.duration)&&(ak.g.duration=bk.end+2592000);}else if(isNaN(ak.g.duration)||bk.end>ak.g.duration){ak.g.duration=bk.end;for(var ck=0;ck<ak.g.sourceBuffers.length;++ck)ak.g.sourceBuffers[ck].appendWindowEnd=bk.end;}}j.Ta=function(){this.C=null;xj(this);var ak=wj(this,vj(this));ak&&(tj(this,ak.start,ak.end),this.f.paused||uj(this,this.f.currentTime,ak.start,ak.end));};function tj(ak,bk,ck){bk=qa({type:"seekrangechanged",bubbles:true,start:bk,end:ck});ak.dispatchEvent(bk);}j.Pa=function(){var ak=this.f.currentTime;if(null!=this.l){if(ak>=this.l-.01&&ak<=this.l+.01){this.l=null;return;}this.l=null;}var bk=wj(this,vj(this));if(bk){var ck=bk.end;(bk=uj(this,ak,bk.start,ck))||(ak<=ck+.01?bk=false:(this.f.currentTime=ck,bk=true));if(!bk)for(var dk in this.c)this.c[dk].za();}};function uj(ak,bk,ck,dk){if(bk>=ck-.01)return false;bk=0;if(ak.a.b){bk=.5;for(var ek in ak.c)if(!ak.c[ek].Aa(ck+bk)){bk=ak.a.c;break;}}ak.f.currentTime=Math.min(ck+bk,dk);return true;}j.Ra=function(){if(!this.a.b){for(var ak in this.c)if(!this.c[ak].xa())return;this.g.endOfStream();}};j.cb=function(){var ak=this.A,bk=this.T.getBandwidth();ak.estimatedBandwidth=bk;ak.bandwidthHistory.push(new zh(bk));};function vj(ak){return rd(ak.c).map(function(bk){return bk.wa();}).filter(function(bk){return null!=bk;});}function wj(ak,bk){for(var ck=0,dk=Number.POSITIVE_INFINITY,ek=0;ek<bk.length;++ek){var fk;fk=bk[ek];fk=0<fk.length()?{start:rg(fk).b,end:sg(fk).a}:{start:0,end:0};ck=Math.max(ck,fk.start);null!=fk.end&&(dk=Math.min(dk,fk.end));}if(dk==Number.POSITIVE_INFINITY)if(dk=ak.a.a[0],dk.b){dk=(dk.start||0)+dk.b;}else return null;ak.a.b&&(dk=Math.max(dk-(ak.a.c+ak.B),ck));return ck>dk?null:{start:ck,end:dk};}function xj(ak){ak.a.b&&(ak.C=i.setTimeout(ak.Ta.bind(ak),1000));}function yj(ak){for(var bk in ak.c)ak.c[bk].A(ak.M);}function zj(ak,bk,ck,dk){ck||(ck=new qd());dk||(dk=new zi());cj.call(this,null,ck,dk);"string"===typeof ak?this.na=ak:this.ga=ak;this.fa=bk;this.W=[];this.ba=[];this.ca=[];this.R=null;}m(zj,cj);l("shaka.player.DashVideoSource",zj);zj.prototype.pa=function(ak,bk,ck){this.W.push(ak);this.ba.push(bk||"");this.ca.push(ck||"");};zj.prototype.addExternalCaptions=zj.prototype.pa;zj.prototype.qa=function(ak){this.R=ak;};zj.prototype.setNetworkCallback=zj.prototype.qa;zj.prototype.destroy=function(){this.R=this.fa=null;cj.prototype.destroy.call(this);};zj.prototype.X=function(){var ak=ab(this,function(ck){for(var dk=0;dk<this.W.length;dk++){var ek=ck,fk=this.W[dk],gk=this.ba[dk],hk=this.ca[dk];if(0!==ek.a.length){var ik=new ne();ik.contentType="text";ik.lang=gk||"en";ik.c=true;gk=new qe();gk.bandwidth=0;gk.f=hk||"text/vtt";gk.m=[new xd(fk)];ik.a.push(gk);ek.a[0].b.push(ik);ef(ek.a[0]);}}if("dynamic"==ck.type)return ck=Error("Live manifest support not enabled."),ck.type="stream",Promise.reject(ck);dk=new lh(this.fa);ek=this.R;fk=(Date.now()+hb)/1000;for(hk=0;hk<ck.a.length;++hk)for(ik=ck.a[hk],gk=0;gk<ik.b.length;++gk){var jk=ik.b[gk];if("text"!=jk.contentType)for(var kk=0;kk<jk.a.length;++kk){var lk=jk.a[kk],mk=0,mk=mk+(lk.g?1:0),mk=mk+(lk.b?1:0),mk=mk+(lk.a?1:0);0==mk?(jk.a.splice(kk,1),--kk):1!=mk&&(lk.g?(lk.b=null,lk.a=null):lk.b&&(lk.a=null));}}mh(ck);for(hk=0;hk<ck.a.length;++hk)for(ik=ck.a[hk],gk=0;gk<ik.b.length;++gk){kk=jk=ik.b[gk];lk=null;for(mk=0;mk<kk.a.length;++mk){var nk=kk.a[mk].f||"";lk?nk!=lk&&(kk.a.splice(mk,1),--mk):lk=nk;}0==jk.a.length&&(ik.b.splice(gk,1),--gk);}"dynamic"==ck.type&&null==ck.c&&(ck.c=fk);fk=new jh();"dynamic"==ck.type&&(fk.b=true,fk.f=ck.f,fk.h=new dg(ek,ck.j||ck.url),fk.g=ck.c);fk.c=ck.g||5;for(hk=0;hk<ck.a.length;++hk){ik=ck.a[hk];if(null==ik.start)break;ik=nh(dk,ck,ik,ek);fk.a.push(ik);}this.a=fk;return cj.prototype.X.call(this);});if(this.ga)return ak(this.ga);var bk=[new xd(this.na)],bk=new dg(this.R,bk);return ig(new hg(bk,this.da)).then(ak);};}.bind(h,b))();f.exports=h.shaka;},null);
__d('VideoPlayerHTML5Shaka',['BlobFactory','EventEmitter','EventListener','Event','VideoPlayerShakaExperiments','dispatchEvent','Shaka'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o,p=c('Shaka').player,q=p.Player,r=p.DashVideoSource,s=p.VideoTrack,t=c('Shaka').dash.mpd.parseMpd;c('Shaka').polyfill.Fullscreen.install();function u(z){var aa=z.getVideoTracks();aa.sort(s.compare);return aa.pop().id;}function v(z){var aa=z.getVideoTracks();aa.sort(s.compare);return aa.shift().id;}function w(z){var aa=h.getBlob([z]);return URL.createObjectURL(aa);}function x(z,aa){'use strict';this.$DisabledAbrManager1=z;this.$DisabledAbrManager2=aa;}x.prototype.initialize=function(z,aa){'use strict';this.$DisabledAbrManager3=aa;};x.prototype.start=function(){'use strict';if(this.$DisabledAbrManager4)return;this.$DisabledAbrManager4=true;if(this.$DisabledAbrManager2&&this.$DisabledAbrManager1)this.$DisabledAbrManager3.selectVideoTrack(u(this.$DisabledAbrManager3),false);};x.prototype.enable=function(){'use strict';};x.prototype.getInitialVideoTrackId=function(){'use strict';if(this.$DisabledAbrManager2)return v(this.$DisabledAbrManager3);var z=this.$DisabledAbrManager1?u(this.$DisabledAbrManager3):v(this.$DisabledAbrManager3);return z;};x.prototype.destroy=function(){'use strict';this.$DisabledAbrManager3=null;};n=babelHelpers.inherits(y,i);o=n&&n.prototype;function y(z,aa,ba){'use strict';var ca=ba.playHighQualityTrack;o.constructor.call(this);this.$VideoPlayerHTML5Shaka1=true;var da=j.listen(z,'playing',(function(){this.$VideoPlayerHTML5Shaka1=false;da.remove();}).bind(this));this.$VideoPlayerHTML5Shaka2=new q(z);this.$VideoPlayerHTML5Shaka2.addEventListener('bufferingStart',(function(){return this.$VideoPlayerHTML5Shaka3();}).bind(this));this.$VideoPlayerHTML5Shaka2.addEventListener('bufferingEnd',(function(){return this.$VideoPlayerHTML5Shaka4();}).bind(this));var ea=new x(ca,l.switchFromLowQuality),fa=t(aa),ga=new r(fa,null,null,l.enableAdaptation?null:ea);this.$VideoPlayerHTML5Shaka5=z;this.$VideoPlayerHTML5Shaka2.configure({enableAdaptation:l.enableAdaptation,streamBufferSize:l.streamBufferSize,initialStreamBufferSize:l.initialStreamBufferSize});this.$VideoPlayerHTML5Shaka2.load(ga);}y.prototype.selectHighestQualityTrack=function(){'use strict';this.$VideoPlayerHTML5Shaka2.selectVideoTrack(u(this.$VideoPlayerHTML5Shaka2),true);};y.prototype.selectLowestQualityTrack=function(){'use strict';this.$VideoPlayerHTML5Shaka2.selectVideoTrack(v(this.$VideoPlayerHTML5Shaka2),false);};y.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka6){this.$VideoPlayerHTML5Shaka7=true;this.$VideoPlayerHTML5Shaka8=true;m(this.$VideoPlayerHTML5Shaka5,'pause');this.$VideoPlayerHTML5Shaka2.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka5.pause();};y.prototype.play=function(){'use strict';if(this.$VideoPlayerHTML5Shaka6){this.$VideoPlayerHTML5Shaka7=false;this.$VideoPlayerHTML5Shaka8=true;m(this.$VideoPlayerHTML5Shaka5,'play');m(this.$VideoPlayerHTML5Shaka5,'waiting');this.$VideoPlayerHTML5Shaka2.setResumeAfterBuffering(true);}else this.$VideoPlayerHTML5Shaka5.play();};y.prototype.$VideoPlayerHTML5Shaka3=function(){'use strict';var z=j.capture(this.$VideoPlayerHTML5Shaka5.parentNode,'pause',(function(aa){if(aa.target!=this.$VideoPlayerHTML5Shaka5)return;z.remove();k.kill(aa);}).bind(this));this.$VideoPlayerHTML5Shaka6=true;this.$VideoPlayerHTML5Shaka7=false;this.$VideoPlayerHTML5Shaka8=false;this.$VideoPlayerHTML5Shaka2.setResumeAfterBuffering(true);this.emit('bufferingStart');};y.prototype.$VideoPlayerHTML5Shaka4=function(){'use strict';var z=this;if(!this.$VideoPlayerHTML5Shaka7)(function(){var aa=j.capture(z.$VideoPlayerHTML5Shaka5.parentNode,'play',(function(ba){if(ba.target!=this.$VideoPlayerHTML5Shaka5)return;aa.remove();k.kill(ba);}).bind(z));})();if(!this.$VideoPlayerHTML5Shaka8)(function(){var aa=j.capture(z.$VideoPlayerHTML5Shaka5.parentNode,'playing',(function(ba){if(ba.target!=this.$VideoPlayerHTML5Shaka5)return;aa.remove();if(this.$VideoPlayerHTML5Shaka1){this.$VideoPlayerHTML5Shaka1=false;return;}k.kill(ba);}).bind(z));})();this.$VideoPlayerHTML5Shaka6=false;this.emit('bufferingEnd');};y.prototype.hasMultipleVideoTracks=function(){'use strict';var z=this.$VideoPlayerHTML5Shaka2.getVideoTracks();return z.length>1;};y.prototype.destroy=function(){'use strict';this.$VideoPlayerHTML5Shaka2.unload();this.$VideoPlayerHTML5Shaka2=null;};y.isSupported=function(){'use strict';return q.isBrowserSupported();};f.exports=y;},null);